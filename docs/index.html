<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MECO - Incisioni Laser & Stampe 3D</title>
    <style>
        /* Reset & Base */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary-color: #0a1128;
            --secondary-color: #1e2a4a;
            --accent-color: #00c6ff;
            --accent-gradient: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%);
            --text-color: #e6e6e6;
            --text-secondary: #a0a0a0;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-shadow: 0 8px 32px rgba(0, 114, 255, 0.1);
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, #0c1530 100%);
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Header */
        .glass-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(10, 17, 40, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 1000;
            border-bottom: 1px solid var(--glass-border);
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-bubble {
            width: 35px;
            height: 35px;
            background: var(--accent-gradient);
            border-radius: 50%;
        }
        
        .logo-text {
            font-size: 24px;
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .nav-menu {
            display: flex;
            gap: 5px;
        }
        
        .nav-link {
            background: transparent;
            border: none;
            padding: 10px 20px;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 10px;
            transition: var(--transition);
            font-size: 14px;
        }
        
        .nav-link:hover,
        .nav-link.active {
            background: rgba(0, 198, 255, 0.1);
            color: var(--accent-color);
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        /* Main Content */
        .main-content {
            padding-top: 80px;
        }
        
        .section {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Home Section */
        .hero-section {
            text-align: center;
            padding: 60px 20px;
        }
        
        .hero-title {
            font-size: 48px;
            margin-bottom: 20px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero-description {
            font-size: 18px;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 40px;
            line-height: 1.6;
        }
        
        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        
        .glass-btn {
            background: var(--accent-gradient);
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
        }
        
        .glass-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 114, 255, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
        }
        
        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .product-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 20px;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-color);
        }
        
        .product-image {
            width: 100%;
            height: 0;
            padding-bottom: 100%; /* Crea un quadrato perfetto */
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 15px;
            position: relative;
        }

        .product-image img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        /* Effetto hover più evidente */
        .product-card:hover .product-image {
            box-shadow: 0 15px 35px rgba(0, 198, 255, 0.15);
        }

        /* Zoom al hover */
        .product-card:hover .product-image img {
            transform: scale(1.08); /* Leggermente più zoom */
        }
        
        .product-category {
            display: inline-block;
            padding: 5px 10px;
            background: rgba(0, 198, 255, 0.1);
            color: var(--accent-color);
            border-radius: 20px;
            font-size: 12px;
            margin-bottom: 10px;
        }
        
        .product-info h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .product-description {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .product-price {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 15px;
        }
        
        /* Filter Controls */
        .filter-controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .search-box {
            position: relative;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .search-box input {
            width: 100%;
            padding: 15px 20px 15px 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            color: var(--text-color);
            font-size: 16px;
        }
        
        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }
        
        .filter-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 10px 20px;
            background: transparent;
            border: 1px solid var(--glass-border);
            color: var(--text-secondary);
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .filter-btn.active {
            background: var(--accent-gradient);
            color: white;
            border-color: transparent;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2000;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background: var(--primary-color);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px; /* Ridotto da 800px */
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            margin: 20px;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        /* Footer */
        .glass-footer {
            background: rgba(10, 17, 40, 0.9);
            border-top: 1px solid var(--glass-border);
            padding: 40px 20px;
            margin-top: 60px;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            /* MENU MOBILE COMPLETO */
            .nav-menu {
                display: none;
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                height: calc(100vh - 70px);
                background: rgba(10, 17, 40, 0.98);
                backdrop-filter: blur(30px);
                -webkit-backdrop-filter: blur(30px);
                flex-direction: column;
                padding: 20px;
                border-top: 1px solid var(--glass-border);
                z-index: 999;
                overflow-y: auto;
                transform: translateX(-100%);
                transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            .nav-menu.active {
                display: flex;
                transform: translateX(0);
            }
            
            /* Bottone hamburger */
            .mobile-menu-btn {
                display: flex !important;
                align-items: center;
                justify-content: center;
                width: 44px;
                height: 44px;
                background: rgba(0, 198, 255, 0.1);
                border: 1px solid var(--glass-border);
                border-radius: 10px;
                color: white;
                font-size: 20px;
                cursor: pointer;
                z-index: 1000;
                transition: all 0.3s ease;
            }
            
            .mobile-menu-btn:hover {
                background: rgba(0, 198, 255, 0.2);
                transform: scale(1.05);
            }
            
            /* Link nel menu mobile */
            .nav-menu .nav-link {
                width: 100%;
                padding: 18px 20px;
                margin: 8px 0;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid var(--glass-border);
                border-radius: 12px;
                font-size: 16px;
                display: flex;
                align-items: center;
                justify-content: flex-start;
                gap: 15px;
                text-align: left;
                transition: all 0.3s ease;
                position: relative;
            }
            
            .nav-menu .nav-link i {
                width: 20px;
                font-size: 18px;
            }
            
            .nav-menu .nav-link:hover,
            .nav-menu .nav-link.active {
                background: rgba(0, 198, 255, 0.15);
                border-color: var(--accent-color);
                transform: translateX(10px);
                color: var(--accent-color);
            }
            
            /* Contatore preferiti */
            .nav-menu .favorites-count {
                margin-left: auto;
                background: #ff4757;
                color: white;
                font-size: 11px;
                min-width: 20px;
                height: 20px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Overlay per chiudere il menu */
            .menu-overlay {
                display: none;
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                height: calc(100vh - 70px);
                background: rgba(0, 0, 0, 0.7);
                backdrop-filter: blur(5px);
                z-index: 998;
            }
            
            .menu-overlay.active {
                display: block;
            }
        }

        .customization-option {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary);
            padding: 10px 18px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .customization-option.selected {
            background: var(--accent-color) !important;
            border-color: var(--accent-color) !important;
            color: white !important;
        }

        .customization-option:hover {
            background: rgba(0, 198, 255, 0.2);
            border-color: var(--accent-color);
        }

        .customization-input {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-color);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .customization-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(0, 198, 255, 0.2);
        }

        /* Stile per la galleria */
        .gallery-thumb {
            min-width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .gallery-thumb:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }

        .gallery-thumb.active {
            border-color: var(--accent-color) !important;
            box-shadow: 0 4px 12px rgba(0, 198, 255, 0.3);
        }

        .gallery-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Scrollbar personalizzata per la galleria */
        #gallery-thumbs::-webkit-scrollbar {
            height: 6px;
        }

        #gallery-thumbs::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        #gallery-thumbs::-webkit-scrollbar-thumb {
            background: var(--accent-color);
            border-radius: 3px;
        }

        /* Immagine principale nel modal */
        #main-product-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 15px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        #main-product-image:hover {
            transform: scale(1.01);
        }

        /* Responsive per mobile */
        @media (max-width: 768px) {
            #main-product-image {
                height: 300px; /* Un po' più piccolo su mobile */
            }
            
            .modal-content {
                padding: 20px !important;
            }
        }

        @media (max-width: 480px) {
            #main-product-image {
                height: 250px; /* Ancora più piccolo su schermi piccoli */
            }
        }

        /* Per desktop molto grandi */
        @media (min-width: 1200px) {
            #main-product-image {
                height: 450px; /* Ancora più grande su desktop grandi */
            }
        }

        /* Scrollbar per modal */
        .modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .modal-content::-webkit-scrollbar-thumb {
            background: var(--accent-color);
            border-radius: 4px;
        }

        /* Stile per le sezioni del modal */
        .modal-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--glass-border);
        }

        .modal-section-title {
            color: var(--text-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }

        /* Bottone contatti nel modal */
        .contact-modal-btn {
            width: 100%;
            margin-top: 20px;
            padding: 16px !important;
            font-size: 16px !important;
            background: var(--accent-gradient) !important;
        }

        .contact-modal-btn:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 8px 20px rgba(0, 114, 255, 0.4) !important;
        }

        .contact-modal-btn {
            background: var(--accent-gradient) !important;
            border: none !important;
            color: white !important;
            padding: 16px 24px !important;
            font-size: 16px !important;
            font-weight: 600 !important;
            border-radius: 12px !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            width: 100% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 10px !important;
        }

        .contact-modal-btn:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 10px 25px rgba(0, 114, 255, 0.4) !important;
        }

        /* Fallback per immagini mancanti */
        img[onerror] {
            background: linear-gradient(135deg, #1e2a4a 0%, #2d3b6e 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 12px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.active {
            display: flex !important;
            opacity: 1;
        }

        .modal-content {
            background: var(--primary-color);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.9);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal.active .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        /* Animazione per lo zoom */
        @keyframes zoomFadeIn {
            from {
                opacity: 0;
                backdrop-filter: blur(0);
            }
            to {
                opacity: 1;
                backdrop-filter: blur(30px);
            }
        }

        /* Stile per il bottone close dello zoom */
        #zoom-close-btn:hover {
            background: rgba(255, 255, 255, 0.25) !important;
            transform: scale(1.1) !important;
        }

        #zoom-close-btn:active {
            transform: scale(0.95) !important;
        }

        /* Migliora il cursore per l'immagine zoom */
        #image-zoom-modal img {
            cursor: default !important;
        }

        #image-zoom-modal img:hover {
            transform: none !important;
        }

        /* WhatsApp Floating Button */
        .whatsapp-float {
            position: fixed;
            bottom: 25px;
            right: 25px;
            z-index: 1000;
        }

        .whatsapp-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            background: #25D366;
            border-radius: 50%;
            color: white;
            font-size: 32px;
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
            transition: all 0.3s ease;
            text-decoration: none;
            position: relative;
        }

        .whatsapp-btn:hover {
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 12px 30px rgba(37, 211, 102, 0.6);
            background: #1da851;
        }

        .whatsapp-pulse {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #25D366;
            border-radius: 50%;
            animation: pulse 2s infinite;
            z-index: -1;
            opacity: 0.6;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.6;
            }
            70% {
                transform: scale(1.3);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 0;
            }
        }

        /* WhatsApp badge */
        .whatsapp-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            font-size: 12px;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 12px;
            min-width: 20px;
            text-align: center;
        }

        /* WhatsApp buttons in modal and cards */
        .whatsapp-product-btn {
            background: #25D366 !important;
            border: none !important;
            color: white !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 10px !important;
            margin-top: 10px !important;
        }

        .whatsapp-product-btn:hover {
            background: #1da851 !important;
            transform: translateY(-2px) !important;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .whatsapp-float {
                bottom: 20px;
                right: 20px;
            }
            
            .whatsapp-btn {
                width: 55px;
                height: 55px;
                font-size: 28px;
            }
        }

        /* Favorites System */
        .favorite-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: none;
            border-radius: 50%;
            color: #ccc;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .favorite-btn:hover {
            background: white;
            color: #ff4757;
            transform: scale(1.1);
        }

        .favorite-btn.active {
            background: #ff4757;
            color: white;
            animation: heartBeat 0.6s ease;
        }

        .favorite-btn.active:hover {
            background: #ff3742;
            color: white;
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(0.95); }
            75% { transform: scale(1.1); }
        }

        /* Favorites counter in header */
        .nav-link[data-section="favorites"] {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .favorites-count {
            background: #ff4757;
            color: white;
            font-size: 11px;
            font-weight: bold;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* Favorites page */
        .favorites-empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        /* ============ PROMOZIONI ============ */

        /* Promo Banner */
        .promo-banner {
            margin: 40px auto;
            max-width: 1200px;
            padding: 40px;
            background: linear-gradient(135deg, 
                        rgba(0, 198, 255, 0.1) 0%, 
                        rgba(148, 0, 255, 0.1) 100%);
            border: 1px solid rgba(0, 198, 255, 0.3);
            border-radius: 25px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center; /* Centra tutto il contenuto */
        }

        .promo-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(0, 198, 255, 0.05) 50%, 
                transparent 70%);
            animation: liquidFlow 10s linear infinite;
        }

        .promo-content {
            position: relative;
            z-index: 2;
            text-align: center;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .promo-badge {
            display: inline-block;
            background: linear-gradient(135deg, #ff4757, #ff3742);
            color: white;
            padding: 8px 20px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        .promo-badge i {
            margin-right: 8px;
        }

        .promo-title {
            font-size: 28px;
            margin-bottom: 10px;
            color: white;
            background: linear-gradient(135deg, #fff, var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .promo-description {
            color: var(--text-secondary);
            font-size: 16px;
            margin-bottom: 30px;
        }

        /* Countdown Timer */
        .countdown-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
            width: 100%;
        }

        .countdown-box {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 198, 255, 0.3);
            border-radius: 15px;
            padding: 20px 15px;
            min-width: 100px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .countdown-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                        transparent, 
                        rgba(255, 255, 255, 0.1), 
                        transparent);
            transition: left 0.6s ease;
        }

        .countdown-box:hover::before {
            left: 100%;
        }

        .countdown-box:hover {
            transform: translateY(-5px);
            border-color: var(--accent-color);
            background: rgba(0, 198, 255, 0.1);
            box-shadow: 0 10px 25px rgba(0, 114, 255, 0.2);
        }

        .countdown-number {
            display: block;
            font-size: 36px;
            font-weight: 700;
            color: var(--accent-color);
            line-height: 1;
            margin-bottom: 5px;
            font-family: 'Arial', sans-serif;
        }

        .countdown-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .promo-btn {
            margin-top: 20px;
            background: linear-gradient(135deg, #ff4757, #ff3742) !important;
        }

        .promo-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 18px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .promo-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        /* Promo Badge sui prodotti */
        .product-promo-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: linear-gradient(135deg, #ff4757, #ff3742);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            z-index: 9;
            animation: pulse 2s infinite;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Prezzi scontati */
        .original-price {
            text-decoration: line-through;
            color: var(--text-secondary);
            font-size: 16px;
            margin-right: 8px;
        }

        .promo-price {
            color: #ff4757;
            font-size: 24px;
            font-weight: 700;
        }

        /* Promo Card speciale */
        .promo-card {
            background: linear-gradient(135deg, 
                rgba(0, 198, 255, 0.08) 0%, 
                rgba(148, 0, 255, 0.08) 100%);
            border: 1px solid rgba(0, 198, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .promo-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(0, 198, 255, 0.05) 50%, 
                transparent 70%);
            animation: liquidFlow 8s linear infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .promo-banner {
                padding: 20px;
                margin: 30px 20px;
            }
            
            .promo-title {
                font-size: 22px;
            }
            
            .countdown-box {
                min-width: 70px;
                padding: 15px 10px;
            }
            
            .countdown-number {
                font-size: 28px;
            }
            
            .countdown-container {
                gap: 10px;
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Banner promozionale */
        #promo-banner {
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            text-align: center !important;
        }

        #promo-banner .countdown-container {
            justify-content: center !important;
            margin-left: auto !important;
            margin-right: auto !important;
        }

        /* Controlla che questi esistano */
        .countdown-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .countdown-box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px 10px;
            min-width: 80px;
            text-align: center;
        }

        .countdown-number {
            font-size: 28px;
            font-weight: 700;
            color: var(--accent-color);
            display: block;
            line-height: 1;
        }

        .countdown-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            display: block;
            margin-top: 5px;
        }

        /* Pulsante per riaprire promozioni */
        .reopen-promo-btn {
            position: fixed;
            bottom: 100px;
            right: 25px;
            background: linear-gradient(135deg, #ff4757, #ff3742);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 6px 20px rgba(255, 71, 87, 0.4);
            z-index: 999;
            transition: all 0.3s ease;
            animation: float 3s ease-in-out infinite;
        }

        .reopen-promo-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 30px rgba(255, 71, 87, 0.6);
        }

        .reopen-promo-btn i {
            font-size: 16px;
        }

        /* Responsive per mobile */
        @media (max-width: 768px) {
            .reopen-promo-btn {
                bottom: 90px;
                right: 20px;
                padding: 10px 16px;
                font-size: 13px;
            }
            
            .reopen-promo-btn span {
                display: none;
            }
            
            .reopen-promo-btn i {
                margin: 0;
                font-size: 18px;
            }
        }

        /* Effetti per le carte certificazioni */
        .cert-card {
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .cert-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                        rgba(0, 198, 255, 0.05) 0%, 
                        rgba(148, 0, 255, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .cert-card:hover::before {
            opacity: 1;
        }

        .cert-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent-color);
            box-shadow: 0 20px 40px rgba(0, 114, 255, 0.15);
        }

        /* Animazione per i loghi */
        @keyframes floatLogo {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .cert-card:hover div:first-child {
            animation: floatLogo 2s ease-in-out infinite;
        }

        /* ============ LIQUID GLASS EFFECTS ============ */

        /* Enhanced glass effect */
        .glass-enhanced {
            background: rgba(255, 255, 255, 0.07) !important;
            backdrop-filter: blur(25px) saturate(180%) !important;
            -webkit-backdrop-filter: blur(25px) saturate(180%) !important;
            border: 1px solid rgba(255, 255, 255, 0.12) !important;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .glass-enhanced::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent
            );
            transition: left 0.7s ease;
        }

        .glass-enhanced:hover::before {
            left: 100%;
        }

        /* Liquid border animation */
        .liquid-border {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
        }

        .liquid-border::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(
                45deg,
                var(--accent-color),
                #0072ff,
                #9400ff,
                var(--accent-color)
            );
            border-radius: 22px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.4s ease;
            animation: liquidFlow 3s linear infinite;
            background-size: 400% 400%;
        }

        .liquid-border:hover::after {
            opacity: 1;
        }

        @keyframes liquidFlow {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        /* Dynamic reflections */
        .reflective-surface {
            position: relative;
            overflow: hidden;
        }

        .reflective-surface::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.1) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            transition: transform 0.6s ease;
            pointer-events: none;
        }

        .reflective-surface:hover::after {
            transform: rotate(30deg) translateX(20px) translateY(20px);
        }

        /* Floating animation */
        .floating {
            animation: floating 6s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        /* Shimmer effect */
        .shimmer {
            position: relative;
            overflow: hidden;
        }

        .shimmer::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% {
                left: -100%;
            }
            100% {
                left: 200%;
            }
        }

        /* Glow pulse effect */
        .glow-pulse {
            animation: glowPulse 4s infinite;
        }

        @keyframes glowPulse {
            0%, 100% {
                box-shadow: 0 0 20px rgba(0, 198, 255, 0.3);
            }
            50% {
                box-shadow: 0 0 40px rgba(0, 198, 255, 0.6);
            }
        }

        /* Morphing blob background */
        .morphing-blob {
            position: absolute;
            width: 500px;
            height: 500px;
            border-radius: 50%;
            background: linear-gradient(135deg, 
                        rgba(0, 198, 255, 0.15) 0%, 
                        rgba(148, 0, 255, 0.15) 100%);
            filter: blur(60px);
            animation: morph 20s infinite;
            z-index: -1;
            opacity: 0.5;
        }

        @keyframes morph {
            0%, 100% {
                border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
                transform: scale(1) rotate(0deg);
            }
            33% {
                border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%;
                transform: scale(1.1) rotate(120deg);
            }
            66% {
                border-radius: 40% 30% 60% 70% / 70% 40% 60% 30%;
                transform: scale(0.9) rotate(240deg);
            }
        }
        
        /* ============ RECENSIONI CLIENTI ============ */

    /* Contenitore recensioni */
    .reviews-container {
        position: relative;
        padding: 20px;
    }

    /* Carousel recensioni */
    .reviews-carousel {
        display: flex;
        gap: 30px;
        overflow-x: hidden;
        scroll-behavior: smooth;
        padding: 20px 10px;
        scrollbar-width: none; /* Firefox */
    }

    .reviews-carousel::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Edge */
    }

    /* Card recensione */
    .review-card {
        flex: 0 0 350px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        padding: 30px;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        min-height: 300px;
    }

    .review-card:hover {
        transform: translateY(-10px);
        border-color: var(--accent-color);
        box-shadow: 0 20px 40px rgba(0, 114, 255, 0.15);
    }

    /* Testo recensione */
    .review-text {
        color: var(--text-color);
        font-size: 15px;
        line-height: 1.6;
        margin-bottom: 25px;
        position: relative;
    }

    .review-text::before {
        content: '"';
        font-size: 60px;
        color: var(--accent-color);
        opacity: 0.2;
        position: absolute;
        top: -20px;
        left: -10px;
        font-family: Georgia, serif;
    }

    /* Info cliente */
    .review-client {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-top: 25px;
        padding-top: 20px;
        border-top: 1px solid var(--glass-border);
    }

    .client-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: var(--accent-gradient);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 18px;
        flex-shrink: 0;
    }

    .client-info h4 {
        color: white;
        margin-bottom: 5px;
        font-size: 16px;
    }

    .client-info p {
        color: var(--text-secondary);
        font-size: 13px;
    }

    /* Stelle valutazione */
    .review-stars {
        display: flex;
        gap: 3px;
        margin-bottom: 15px;
    }

    .review-stars i {
        color: #FFC107;
        font-size: 14px;
    }

    /* Controlli carousel */
    .carousel-btn {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: var(--glass-bg);
        border: 1px solid var(--glass-border);
        color: var(--text-color);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        font-size: 18px;
        flex-shrink: 0;
    }

    .carousel-btn:hover {
        background: var(--accent-color);
        border-color: var(--accent-color);
        color: white;
        transform: scale(1.1);
    }

    .carousel-dots {
        display: flex;
        gap: 10px;
    }

    .carousel-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--glass-border);
        cursor: pointer;
        transition: all 0.3s ease;
        flex-shrink: 0;
    }

    .carousel-dot.active {
        background: var(--accent-color);
        transform: scale(1.2);
    }

    /* Stelle rating nel form */
    .rating-stars i {
        cursor: pointer;
        transition: all 0.2s ease;
        margin: 0 2px;
    }

    .rating-stars i:hover {
        transform: scale(1.2);
    }

    .rating-stars i.active {
        color: #FFC107;
    }

    /* Badge recensione verificata */
    .verified-badge {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        background: rgba(76, 175, 80, 0.1);
        color: #4CAF50;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .review-card {
            flex: 0 0 280px;
            padding: 20px;
            min-height: 280px;
        }
        
        .reviews-carousel {
            gap: 15px;
            padding: 10px 5px;
        }
        
        .carousel-btn {
            width: 40px;
            height: 40px;
            font-size: 16px;
        }
        
        .client-avatar {
            width: 40px;
            height: 40px;
            font-size: 16px;
        }
    }

    /* Stile per il select nelle recensioni */
    #review-modal select {
        width: 100%;
        padding: 12px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--glass-border);
        border-radius: 10px;
        color: var(--text-color);
        font-size: 14px;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2300c6ff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 12px center;
        background-size: 16px;
        padding-right: 40px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    #review-modal select:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 2px rgba(0, 198, 255, 0.2);
        background-color: rgba(255, 255, 255, 0.08);
    }

    #review-modal select option {
        background: var(--primary-color);
        color: var(--text-color);
        padding: 10px;
    }

    #review-modal select:hover {
        border-color: var(--accent-color);
        background-color: rgba(255, 255, 255, 0.08);
    }

    /* Stile per tutti gli input/textarea nel modal recensioni */
    #review-modal input,
    #review-modal textarea {
        width: 100%;
        padding: 12px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--glass-border);
        border-radius: 10px;
        color: var(--text-color);
        font-size: 14px;
        transition: all 0.3s ease;
    }

    #review-modal input:focus,
    #review-modal textarea:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 2px rgba(0, 198, 255, 0.2);
        background-color: rgba(255, 255, 255, 0.08);
    }

    #review-modal input:hover,
    #review-modal textarea:hover {
        border-color: var(--accent-color);
        background-color: rgba(255, 255, 255, 0.08);
    }

    /* Placeholder color */
    #review-modal input::placeholder,
    #review-modal textarea::placeholder {
        color: var(--text-secondary);
        opacity: 0.7;
    }

    .machinery-video video{
        width: 100%;
        height: 250px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2rem;
        position: relative;
        object-fit: cover;
    }

    /* ============ MENU MOBILE FIX DEFINITIVO ============ */
    @media (max-width: 768px) {
        /* HEADER FIX - Importante per z-index */
        .glass-header {
            z-index: 10000 !important;
        }
        
        /* MENU MOBILE - Soluzione pulita senza blur su tutto */
        .nav-menu {
            position: fixed !important;
            top: 70px !important;
            left: 0 !important;
            width: 100% !important;
            height: auto !important;
            max-height: calc(100vh - 70px) !important;
            background: linear-gradient(135deg, 
                rgba(10, 17, 40, 0.98) 0%, 
                rgba(30, 42, 74, 0.98) 100%) !important;
            border: 1px solid var(--glass-border) !important;
            border-top: none !important;
            border-radius: 0 0 20px 20px !important;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4) !important;
            padding: 25px 20px !important;
            display: none !important;
            flex-direction: column !important;
            z-index: 9999 !important;
            overflow-y: auto !important;
            transform: translateY(-30px) scale(0.95) !important;
            opacity: 0 !important;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
            /* Rimuovi il backdrop-filter dal contenitore principale */
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
        }
        
        .nav-menu.active {
            display: flex !important;
            transform: translateY(0) scale(1) !important;
            opacity: 1 !important;
            animation: none !important;
        }
        
        /* SINGOLI LINK con glass effect */
        .nav-menu .nav-link {
            width: 100% !important;
            padding: 18px 22px !important;
            margin: 8px 0 !important;
            background: rgba(255, 255, 255, 0.07) !important;
            backdrop-filter: blur(20px) !important;
            -webkit-backdrop-filter: blur(20px) !important;
            border: 1px solid var(--glass-border) !important;
            border-radius: 14px !important;
            color: var(--text-color) !important;
            font-size: 16px !important;
            font-weight: 500 !important;
            text-align: left !important;
            display: flex !important;
            align-items: center !important;
            gap: 14px !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            cursor: pointer !important;
            position: relative !important;
            overflow: hidden !important;
            z-index: 1 !important;
        }
        
        /* Effetto hover sui link */
        .nav-menu .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(0, 198, 255, 0.1), 
                transparent);
            transition: left 0.6s ease;
            z-index: -1;
        }
        
        .nav-menu .nav-link:hover::before {
            left: 100%;
        }
        
        .nav-menu .nav-link:hover,
        .nav-menu .nav-link.active {
            background: rgba(0, 198, 255, 0.15) !important;
            border-color: var(--accent-color) !important;
            color: var(--accent-color) !important;
            transform: translateX(10px) scale(1.02) !important;
            box-shadow: 0 10px 25px rgba(0, 114, 255, 0.2) !important;
        }
        
        /* Icone nei link */
        .nav-menu .nav-link i {
            font-size: 18px !important;
            width: 24px !important;
            text-align: center !important;
            transition: transform 0.3s ease !important;
        }
        
        .nav-menu .nav-link:hover i {
            transform: scale(1.2) !important;
        }
        
        /* Contatore preferiti */
        .nav-menu .nav-link .favorites-count {
            margin-left: auto !important;
            background: linear-gradient(135deg, #ff4757, #ff3742) !important;
            color: white !important;
            font-size: 11px !important;
            font-weight: bold !important;
            min-width: 22px !important;
            height: 22px !important;
            border-radius: 11px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            padding: 0 6px !important;
            box-shadow: 0 4px 10px rgba(255, 71, 87, 0.3) !important;
        }
        
        /* BOTTONE HAMBURGER - Più visibile */
        .mobile-menu-btn {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            width: 46px !important;
            height: 46px !important;
            background: rgba(0, 198, 255, 0.1) !important;
            border: 1px solid var(--glass-border) !important;
            border-radius: 12px !important;
            color: white !important;
            font-size: 22px !important;
            cursor: pointer !important;
            z-index: 10001 !important;
            transition: all 0.3s ease !important;
            position: relative !important;
            overflow: hidden !important;
        }
        
        .mobile-menu-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(0, 198, 255, 0.2), 
                transparent);
            transition: left 0.6s ease;
        }
        
        .mobile-menu-btn:hover::before {
            left: 100%;
        }
        
        .mobile-menu-btn:hover {
            background: rgba(0, 198, 255, 0.2) !important;
            transform: scale(1.05) !important;
            box-shadow: 0 8px 25px rgba(0, 114, 255, 0.3) !important;
        }
        
        .mobile-menu-btn.active {
            background: var(--accent-color) !important;
            transform: rotate(90deg) !important;
        }
        
        /* OVERLAY - Semplice, senza blur */
        .mobile-menu-overlay {
            position: fixed !important;
            top: 70px !important;
            left: 0 !important;
            width: 100% !important;
            height: calc(100vh - 70px) !important;
            background: rgba(0, 0, 0, 0.7) !important;
            z-index: 9998 !important;
            display: none !important;
            opacity: 0 !important;
            transition: opacity 0.3s ease !important;
            /* Rimuovi backdrop-filter */
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
        }
        
        .mobile-menu-overlay.active {
            display: block !important;
            opacity: 1 !important;
        }
        
        /* Scrollbar personalizzata per menu */
        .nav-menu::-webkit-scrollbar {
            width: 6px;
        }
        
        .nav-menu::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }
        
        .nav-menu::-webkit-scrollbar-thumb {
            background: var(--accent-color);
            border-radius: 3px;
        }
    }

    .logo2 {
        height: 50px;
        margin-left: -10px;
        margin-top: -7px;
        border-radius: 150px;
    }

    /* Forza display su mobile */
    @media (max-width: 768px) {
        .mobile-menu-btn {
            display: flex !important;
        }
        
        .nav-menu:not(.active) {
            display: none !important;
        }
    }

    /* Stile per multiple banner */
    #promo-banners-container {
        position: relative;
        margin: 20px auto;
        max-width: 1200px;
    }

    .promo-banner:not(:last-child) {
        margin-bottom: 20px;
    }

    /* Colori diversi per diverse promozioni */
    .promo-banner[data-promo-id*="natale"] .promo-badge {
        background: linear-gradient(135deg, #ff4757, #ff3742);
    }

    .promo-banner[data-promo-id*="sanvalentino"] .promo-badge {
        background: linear-gradient(135deg, #e91e63, #c2185b);
    }

    .promo-banner[data-promo-id*="lamp"] .promo-badge {
        background: linear-gradient(135deg, #00c6ff, #0072ff);
    }

    /* Animazione per nuovi banner */
    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .promo-banner {
        animation: slideDown 0.5s ease;
    }

    /* Assicurati che queste classi siano definite */
    .promo-banner {
        margin: 40px auto;
        max-width: 1200px;
        padding: 40px;
        background: linear-gradient(135deg, 
                    rgba(0, 198, 255, 0.1) 0%, 
                    rgba(148, 0, 255, 0.1) 100%);
        border: 1px solid rgba(0, 198, 255, 0.3);
        border-radius: 25px;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        opacity: 1 !important;
        visibility: visible !important;
        display: block !important;
    }

    .promo-banner .promo-content {
        position: relative;
        z-index: 2;
        text-align: center;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .countdown-container {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin: 25px 0;
        flex-wrap: wrap;
    }

    .countdown-box {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 15px 10px;
        min-width: 80px;
        text-align: center;
    }

    .countdown-number {
        font-size: 28px;
        font-weight: 700;
        color: var(--accent-color);
        display: block;
        line-height: 1;
    }

    .countdown-label {
        font-size: 11px;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 1px;
        display: block;
        margin-top: 5px;
    }

    /* Se il banner è nascosto, mostra un messaggio di debug */
    #promo-banners-container:empty::before {
        content: "⏳ Nessuna promozione attiva al momento";
        display: block;
        text-align: center;
        color: var(--text-secondary);
        padding: 40px;
        font-style: italic;
    }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="glass-header">
        <div class="header-container">
            <div class="logo">
                <div class="logo-bubble">
                    <a href="#home">
                        <img class="logo2" src="meco.jpeg" alt="MECO Logo">
                    </a>
                </div>
                <div class="logo-text">MECO - Incisioni & Stampe 3D</div>
            </div>
            
            <nav class="nav-menu">
                <button class="nav-link active" data-section="home">
                    <i class="fas fa-home"></i> Home
                </button>
                <button class="nav-link" data-section="catalogo">
                    <i class="fas fa-th-large"></i> Catalogo
                </button>
                <button class="nav-link" data-section="chi-siamo">
                    <i class="fas fa-users"></i> Chi Siamo
                </button>
                <button class="nav-link" data-section="contatti">
                    <i class="fas fa-envelope"></i> Contatti
                </button>
                <button class="nav-link" data-section="favorites">
                    <i class="fas fa-heart"></i>
                    <span>Preferiti</span>
                    <span class="favorites-count" style="display: none;">0</span>
                </button>
            </nav>
            
            <button class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Home Section -->
        <section id="home" class="section active">
            <div class="hero-section">
                <h1 class="hero-title">MECO - Incisioni & Stampe 3D</h1>
                <p class="hero-description">
                    Realizziamo incisioni laser e stampe 3D personalizzate di altissima qualità. 
                    Ogni pezzo è creato con passione e tecnologia all'avanguardia.
                </p>
                <div class="hero-buttons">
                    <button class="glass-btn" data-section="catalogo">
                        <span>Esplora Catalogo</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                    <button class="glass-btn btn-secondary" data-section="contatti">
                        <span>Contattaci</span>
                        <i class="fas fa-phone"></i>
                    </button>
                </div>
            </div>

            <!-- Nuova sezione nella Home -->
            <section id="certificazioni" style="padding: 80px 20px; background: rgba(0, 0, 0, 0.2); border-radius: 15px;">
                <div style="max-width: 1200px; margin: 0 auto;">
                    <div style="text-align: center; margin-bottom: 60px;">
                        <h2 style="font-size: 36px; margin-bottom: 15px; color: var(--accent-color);">
                            <i class="fas fa-award" style="margin-right: 10px;"></i>
                            Qualità Certificata
                        </h2>
                        <p style="color: var(--text-secondary); max-width: 700px; margin: 0 auto; font-size: 16px;">
                            La nostra garanzia di eccellenza: materiali premium, precisione millimetrica e processi certificati
                        </p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px;">
                        <!-- Carta 1: Materiali -->
                        <div class="cert-card" style="background: var(--glass-bg); padding: 40px; border-radius: 20px; 
                                                    border: 1px solid var(--glass-border); text-align: center;">
                            <div style="width: 80px; height: 80px; background: var(--accent-gradient); border-radius: 50%; 
                                    display: flex; align-items: center; justify-content: center; margin: 0 auto 25px;">
                                <i class="fas fa-gem" style="font-size: 32px; color: white;"></i>
                            </div>
                            <h3 style="color: white; margin-bottom: 15px; font-size: 22px;">Materiali Premium</h3>
                            <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px;">
                                Utilizziamo solo legni di prima scelta e filamenti PLA/ABS di qualità certificata
                            </p>
                            <div style="color: var(--accent-color); font-size: 14px; font-weight: 600;">
                                <i class="fas fa-check-circle" style="margin-right: 8px;"></i>
                                Certificazione FSC per legni
                            </div>
                        </div>
                        
                        <!-- Carta 2: Precisione -->
                        <div class="cert-card" style="background: var(--glass-bg); padding: 40px; border-radius: 20px; 
                                                    border: 1px solid var(--glass-border); text-align: center;">
                            <div style="width: 80px; height: 80px; background: var(--accent-gradient); border-radius: 50%; 
                                    display: flex; align-items: center; justify-content: center; margin: 0 auto 25px;">
                                <i class="fas fa-ruler-combined" style="font-size: 32px; color: white;"></i>
                            </div>
                            <h3 style="color: white; margin-bottom: 15px; font-size: 22px;">Precisione Laser</h3>
                            <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px;">
                                Macchine a controllo numerico con precisione di ±0.1mm garantiscono risultati perfetti
                            </p>
                            <div style="color: var(--accent-color); font-size: 14px; font-weight: 600;">
                                <i class="fas fa-check-circle" style="margin-right: 8px;"></i>
                                Tolleranza ≤ 0.1mm
                            </div>
                        </div>
                        
                        <!-- Carta 3: Garanzia -->
                        <div class="cert-card" style="background: var(--glass-bg); padding: 40px; border-radius: 20px; 
                                                    border: 1px solid var(--glass-border); text-align: center;">
                            <div style="width: 80px; height: 80px; background: var(--accent-gradient); border-radius: 50%; 
                                    display: flex; align-items: center; justify-content: center; margin: 0 auto 25px;">
                                <i class="fas fa-shield-alt" style="font-size: 32px; color: white;"></i>
                            </div>
                            <h3 style="color: white; margin-bottom: 15px; font-size: 22px;">Garanzia 24 Mesi</h3>
                            <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px;">
                                Ogni prodotto è coperto da garanzia di 24 mesi su materiali e lavorazione
                            </p>
                            <div style="color: var(--accent-color); font-size: 14px; font-weight: 600;">
                                <i class="fas fa-check-circle" style="margin-right: 8px;"></i>
                                Garanzia estesa inclusa
                            </div>
                        </div>
                    </div>
                    
                    <!-- Loghi Certificazioni -->
                    <div style="display: flex; justify-content: center; align-items: center; gap: 40px; 
                                flex-wrap: wrap; margin-top: 60px; padding: 40px; 
                                background: rgba(255, 255, 255, 0.03); border-radius: 20px;">
                        <div style="text-align: center;">
                            <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.05); 
                                    border-radius: 50%; display: flex; align-items: center; justify-content: center;
                                    margin: 0 auto 15px;">
                                <i class="fas fa-leaf" style="font-size: 32px; color: #4CAF50;"></i>
                            </div>
                            <div style="color: white; font-weight: 600;">Materiali Eco-Friendly</div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.05); 
                                    border-radius: 50%; display: flex; align-items: center; justify-content: center;
                                    margin: 0 auto 15px;">
                                <i class="fas fa-industry" style="font-size: 32px; color: var(--accent-color);"></i>
                            </div>
                            <div style="color: white; font-weight: 600;">Made in Italy</div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.05); 
                                    border-radius: 50%; display: flex; align-items: center; justify-content: center;
                                    margin: 0 auto 15px;">
                                <i class="fas fa-recycle" style="font-size: 32px; color: #00C853;"></i>
                            </div>
                            <div style="color: white; font-weight: 600;">Sostenibilità</div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.05); 
                                    border-radius: 50%; display: flex; align-items: center; justify-content: center;
                                    margin: 0 auto 15px;">
                                <i class="fas fa-handshake" style="font-size: 32px; color: #FFC107;"></i>
                            </div>
                            <div style="color: white; font-weight: 600;">Artigianalità</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ============ RECENSIONI CLIENTI ============ -->
            <div id="recensioni" style="padding: 80px 20px; position: relative; overflow: hidden;">
                <!-- Effetto background -->
                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
                            background: radial-gradient(circle at 30% 50%, rgba(0, 198, 255, 0.05) 0%, transparent 50%),
                                        radial-gradient(circle at 70% 20%, rgba(148, 0, 255, 0.05) 0%, transparent 50%); 
                            z-index: -1;"></div>
                
                <div style="max-width: 1200px; margin: 0 auto; position: relative;">
                    <!-- Testa sezione -->
                    <div style="text-align: center; margin-bottom: 60px;">
                        <div style="display: inline-flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                            <div style="display: flex;">
                                <i class="fas fa-star" style="color: #FFC107; font-size: 24px;"></i>
                                <i class="fas fa-star" style="color: #FFC107; font-size: 24px;"></i>
                                <i class="fas fa-star" style="color: #FFC107; font-size: 24px;"></i>
                                <i class="fas fa-star" style="color: #FFC107; font-size: 24px;"></i>
                                <i class="fas fa-star" style="color: #FFC107; font-size: 24px;"></i>
                            </div>
                            <span style="background: rgba(255, 193, 7, 0.1); color: #FFC107; padding: 8px 16px; 
                                        border-radius: 20px; font-size: 14px; font-weight: 600;">
                                <i class="fas fa-medal" style="margin-right: 6px;"></i>
                                4.9/5 • 128 Recensioni
                            </span>
                        </div>
                        
                        <h2 style="font-size: 36px; margin-bottom: 15px; color: white;">
                            Cosa dicono i nostri clienti
                        </h2>
                        <p style="color: var(--text-secondary); max-width: 700px; margin: 0 auto; font-size: 16px;">
                            La soddisfazione dei nostri clienti è la nostra migliore testimonianza
                        </p>
                    </div>
                    
                    <!-- Carousel Recensioni -->
                    <div class="reviews-container">
                        <div class="reviews-carousel" id="reviews-carousel">
                            <!-- Recensioni verranno caricate via JavaScript -->
                        </div>
                        
                        <!-- Controlli Carousel -->
                        <div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 40px;">
                            <button class="carousel-btn carousel-prev" id="reviews-prev">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            
                            <div class="carousel-dots" id="reviews-dots">
                                <!-- Dots verranno generati dinamicamente -->
                            </div>
                            
                            <button class="carousel-btn carousel-next" id="reviews-next">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Integrazione Google Reviews -->
                    <div style="text-align: center; margin-top: 60px; padding-top: 40px; border-top: 1px solid var(--glass-border);">
                        <div style="display: inline-flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                            <img src="https://cdn-icons-png.flaticon.com/512/300/300221.png" 
                                alt="Google" style="width: 24px; height: 24px;">
                            <span style="color: white; font-weight: 600;">Recensioni Verificate Google</span>
                        </div>
                        
                        <div style="display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
                            <a href="#" style="color: var(--accent-color); text-decoration: none; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-external-link-alt"></i>
                                Leggi tutte le recensioni su Google
                            </a>
                            <button class="glass-btn" id="add-review-btn" style="padding: 12px 24px;">
                                <i class="fas fa-pen"></i>
                                Lascia una recensione
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ============ FINE RECENSIONI ============ -->
        </section>

        <!-- Pulsante per riaprire le promozioni -->
        <button id="reopen-promo-btn" class="reopen-promo-btn" style="display: none;">
            <i class="fas fa-gift"></i>
            <span>Vedi offerte</span>
        </button>

        <!-- Catalogo Section -->
        <section id="catalogo" class="section">
            <h2 style="text-align: center; margin-bottom: 30px;">Catalogo Prodotti</h2>
            
            <div class="filter-controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Cerca prodotti...">
                </div>
                
                <div class="filter-buttons">
                    <button class="filter-btn active" data-category="tutti">Tutti</button>
                    <button class="filter-btn" data-category="incisioni">Incisioni Laser</button>
                    <button class="filter-btn" data-category="stampe3d">Stampe 3D</button>
                    <button class="filter-btn" data-category="promozioni">
                        <i class="fas fa-fire"></i> In Offerta
                    </button>
                </div>
            </div>
            
            <div class="products-grid" id="products-container">
                <!-- I prodotti verranno caricati qui -->
            </div>
        </section>

        <!-- Favorites Section -->
        <section id="favorites" class="section">
            <div style="text-align: center; margin-bottom: 40px;">
                <h2 style="margin-bottom: 10px; color: var(--accent-color);">
                    <i class="fas fa-heart"></i> I Tuoi Preferiti
                </h2>
                <p style="color: var(--text-secondary);" id="favorites-count-text">
                    Hai 0 prodotti nei preferiti
                </p>
            </div>
            
            <div class="products-grid" id="favorites-container">
                <!-- I prodotti preferiti verranno caricati qui -->
            </div>
            
            <div class="favorites-empty" id="favorites-empty" style="display: none; text-align: center; padding: 60px 20px;">
                <i class="fas fa-heart" style="font-size: 48px; color: var(--accent-color); opacity: 0.5; margin-bottom: 20px;"></i>
                <h3 style="color: var(--text-secondary); margin-bottom: 10px;">Nessun prodotto nei preferiti</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    Clicca il cuore ♥ sui prodotti per salvarli qui!
                </p>
                <button class="glass-btn" data-section="catalogo" style="margin-top: 10px;">
                    <span>Esplora Catalogo</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </section>

        <!-- Chi Siamo Section - VERSIONE MIGLIORATA -->
        <section id="chi-siamo" class="section">
            <div style="max-width: 1000px; margin: 0 auto; padding: 40px 20px;">
                <!-- Titolo principale con effetto speciale -->
                <div style="text-align: center; margin-bottom: 60px;">
                    <h2 style="font-size: 42px; margin-bottom: 15px; color: var(--accent-color); position: relative;">
                        <span style="background: var(--accent-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                            La Nostra Storia
                        </span>
                        <div style="width: 100px; height: 4px; background: var(--accent-gradient); margin: 15px auto 0; border-radius: 2px;"></div>
                    </h2>
                    <p style="color: var(--text-secondary); font-size: 18px; max-width: 700px; margin: 0 auto;">
                        Dove l'innovazione digitale incontra l'artigianalità marchigiana
                    </p>
                </div>

                <!-- Contenitore principale con layout a due colonne -->
                <div style="display: grid; grid-template-columns: 1fr; gap: 40px;">
                    
                    <!-- Colonna sinistra: La nostra storia e valori -->
                    <div style="background: var(--glass-bg); border-radius: 20px; padding: 40px; border: 1px solid var(--glass-border);">
                        <div style="display: flex; align-items: flex-start; gap: 30px; margin-bottom: 40px;">
                            <div style="width: 85px; height: 38px; background: var(--accent-gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-map-marker-alt" style="font-size: 28px; color: white;"></i>
                            </div>
                            <div>
                                <h3 style="color: white; margin-bottom: 15px; font-size: 24px;">Radicati nelle Marche</h3>
                                <p style="color: var(--text-secondary); line-height: 1.7;">
                                    Nati ad Acquaviva Picena, nel cuore delle Marche, portiamo avanti la tradizione artigianale 
                                    italiana con uno sguardo rivolto al futuro. La nostra terra, ricca di storia e maestria, 
                                    ci ispira ogni giorno a creare oggetti che uniscono bellezza e funzionalità.
                                </p>
                            </div>
                        </div>

                        <div style="display: flex; align-items: flex-start; gap: 30px;">
                            <div style="width: 85px; height: 38px; background: var(--accent-gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-bullseye" style="font-size: 28px; color: white;"></i>
                            </div>
                            <div>
                                <h3 style="color: white; margin-bottom: 15px; font-size: 24px;">La Nostra Missione</h3>
                                <p style="color: var(--text-secondary); line-height: 1.7;">
                                    Trasformare visioni in realtà tangibili. Che si tratti di un regalo personalizzato, 
                                    di un prototipo per la tua azienda o di un oggetto decorativo unico, ci impegniamo 
                                    a dare vita alle tue idee con precisione millimetrica e attenzione ai dettagli.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Colonna destra: I nostri servizi -->
                    <div style="background: var(--glass-bg); border-radius: 20px; padding: 40px; border: 1px solid var(--glass-border);">
                        <h3 style="color: white; margin-bottom: 30px; font-size: 24px; display: flex; align-items: center; gap: 15px;">
                            <i class="fas fa-cogs" style="color: var(--accent-color);"></i>
                            Cosa Offriamo
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px;">
                            <div style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px; border-left: 4px solid var(--accent-color);">
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                    <div style="width: 50px; height: 50px; background: rgba(0, 198, 255, 0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-fire" style="color: var(--accent-color); font-size: 22px;"></i>
                                    </div>
                                    <h4 style="color: white; font-size: 18px;">Incisioni Laser</h4>
                                </div>
                                <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                                    Personalizzazioni su legno, plexiglass, metallo e pelle con precisione estrema. 
                                    Ideale per targhe, regali aziendali, premi e oggetti commemorativi.
                                </p>
                            </div>
                            
                            <div style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px; border-left: 4px solid #9400ff;">
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                    <div style="width: 50px; height: 50px; background: rgba(148, 0, 255, 0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-cube" style="color: #9400ff; font-size: 22px;"></i>
                                    </div>
                                    <h4 style="color: white; font-size: 18px;">Stampe 3D</h4>
                                </div>
                                <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                                    Da prototipi funzionali a oggetti decorativi, utilizziamo filamenti PLA, ABS, 
                                    PETG e materiali speciali per risultati durevoli e di qualità.
                                </p>
                            </div>
                            
                            <div style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px; border-left: 4px solid #00C853;">
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                    <div style="width: 50px; height: 50px; background: rgba(0, 200, 83, 0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-lightbulb" style="color: #00C853; font-size: 22px;"></i>
                                    </div>
                                    <h4 style="color: white; font-size: 18px;">Progettazione</h4>
                                </div>
                                <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                                    Supporto nella progettazione 3D, modellazione e ottimizzazione dei file 
                                    per garantire il miglior risultato possibile.
                                </p>
                            </div>
                            
                            <div style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px; border-left: 4px solid #FFC107;">
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                    <div style="width: 50px; height: 50px; background: rgba(255, 193, 7, 0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-hands-helping" style="color: #FFC107; font-size: 22px;"></i>
                                    </div>
                                    <h4 style="color: white; font-size: 18px;">Consulenza</h4>
                                </div>
                                <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                                    Consulenza gratuita per aiutarti a scegliere materiali, finiture e tecniche 
                                    più adatte al tuo progetto.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Sezione Video Macchinari -->
                    <div style="background: linear-gradient(135deg, rgba(0, 198, 255, 0.05) 0%, rgba(148, 0, 255, 0.05) 100%); 
                                border-radius: 20px; padding: 40px; border: 1px solid rgba(0, 198, 255, 0.2); 
                                position: relative; overflow: hidden; margin-top: 40px;">
                        <div style="position: absolute; top: -50px; left: -50px; width: 200px; height: 200px; 
                                    background: radial-gradient(circle, rgba(0, 198, 255, 0.1) 0%, transparent 70%); 
                                    border-radius: 50%;"></div>
                        
                        <h3 style="color: white; margin-bottom: 30px; font-size: 24px; display: flex; align-items: center; gap: 15px; position: relative; z-index: 2;">
                            <i class="fas fa-video" style="color: var(--accent-color);"></i>
                            I Nostri Macchinari
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; position: relative; z-index: 2;">
                            
                            <!-- Video 1: Incisione Laser -->
                            <div style="background: rgba(255,255,255,0.05); border-radius: 15px; overflow: hidden; border: 1px solid var(--glass-border);">
                                <div class="machinery-video" style="overflow: hidden;">
                                    <video src="video/timeLapsInc1.mp4" controls></video>
                                </div>
                                <div style="padding: 20px;">
                                    <h4 style="color: white; margin-bottom: 10px;">Incisore Laser Diodo in Azione</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.5;">
                                        Il nostro incisore laser lavora con precisione millimetrica su diversi materiali.
                                    </p>
                                </div>
                            </div>
                            
                            <!-- Video 2: Stampa 3D -->
                            <div style="background: rgba(255,255,255,0.05); border-radius: 15px; overflow: hidden; border: 1px solid var(--glass-border);">
                                <div class="machinery-video" style="overflow: hidden;">
                                    <video src="video/timeLapsSt3D2.mp4" controls></video>
                                </div>
                                <div style="padding: 20px;">
                                    <h4 style="color: white; margin-bottom: 10px;">Stampante 3D al Lavoro</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.5;">
                                        Il nostro processo di stampa 3D con filamenti PLA/ABS di qualità, layer dopo layer, crea oggetti con dettagli incredibili.
                                    </p>
                                </div>
                            </div>
                            
                            <!-- Video 3: Progettazione -->
                            <div style="background: rgba(255,255,255,0.05); border-radius: 15px; overflow: hidden; border: 1px solid var(--glass-border);">
                                <div class="machinery-video" style="overflow: hidden;">
                                    <video src="video/timeVideoCMY.mp4" controls></video>
                                </div>
                                <div style="padding: 20px;">
                                    <h4 style="color: white; margin-bottom: 10px;">Stampa Multicolore</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.5;">
                                        Tecnologia CMY per stampe a colori vivaci e litofanie.
                                    </p>
                                </div>
                            </div>

                            <!-- Video 4: Progettazione -->
                            <div style="background: rgba(255,255,255,0.05); border-radius: 15px; overflow: hidden; border: 1px solid var(--glass-border);">
                                <div class="machinery-video" style="overflow: hidden;">
                                    <video src="video/timeLapsInc2.mp4" controls></video>
                                </div>
                                <div style="padding: 20px;">
                                    <h4 style="color: white; margin-bottom: 10px;">Processo di Incisione</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.5;">
                                        Ogni dettaglio viene curato con la massima attenzione.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Nota per i video reali -->
                        <div style="margin-top: 25px; padding: 15px; background: rgba(0, 198, 255, 0.05); border-radius: 10px; border-left: 4px solid var(--accent-color);">
                            <p style="color: var(--text-secondary); font-size: 14px; margin: 0;">
                                <i class="fas fa-info-circle" style="margin-right: 8px; color: var(--accent-color);"></i>
                                <strong>Nota:</strong> Questi sono video dimostrativi.
                            </p>
                        </div>
                    </div>

                    <!-- Sezione Tecnologia -->
                    <div style="background: linear-gradient(135deg, rgba(0, 198, 255, 0.05) 0%, rgba(148, 0, 255, 0.05) 100%); 
                                border-radius: 20px; padding: 40px; border: 1px solid rgba(0, 198, 255, 0.2); 
                                position: relative; overflow: hidden;">
                        <div style="position: absolute; top: -50px; right: -50px; width: 200px; height: 200px; 
                                    background: radial-gradient(circle, rgba(0, 198, 255, 0.1) 0%, transparent 70%); 
                                    border-radius: 50%;"></div>
                        
                        <h3 style="color: white; margin-bottom: 30px; font-size: 24px; display: flex; align-items: center; gap: 15px; position: relative; z-index: 2;">
                            <i class="fas fa-microchip" style="color: var(--accent-color);"></i>
                            La Nostra Tecnologia
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; position: relative; z-index: 2;">
                            <div style="text-align: center;">
                                <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 20px; 
                                            display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; backdrop-filter: blur(10px);">
                                    <i class="fas fa-ruler-combined" style="font-size: 32px; color: var(--accent-color);"></i>
                                </div>
                                <h4 style="color: white; margin-bottom: 10px;">Precisione Laser</h4>
                                <p style="color: var(--text-secondary); font-size: 14px;">Macchine Diodo con precisione di ±0.1mm</p>
                            </div>
                            
                            <div style="text-align: center;">
                                <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 20px; 
                                            display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; backdrop-filter: blur(10px);">
                                    <i class="fas fa-print" style="font-size: 32px; color: #9400ff;"></i>
                                </div>
                                <h4 style="color: white; margin-bottom: 10px;">Stampa 3D FDM</h4>
                                <p style="color: var(--text-secondary); font-size: 14px;">Stampanti professionali a filamento</p>
                            </div>
                            
                            <div style="text-align: center;">
                                <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 20px; 
                                            display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; backdrop-filter: blur(10px);">
                                    <i class="fas fa-leaf" style="font-size: 32px; color: #00C853;"></i>
                                </div>
                                <h4 style="color: white; margin-bottom: 10px;">Materiali Eco</h4>
                                <p style="color: var(--text-secondary); font-size: 14px;">PLA biodegradabile e legni certificati</p>
                            </div>
                            
                            <div style="text-align: center;">
                                <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 20px; 
                                            display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; backdrop-filter: blur(10px);">
                                    <i class="fas fa-laptop-code" style="font-size: 32px; color: #FFC107;"></i>
                                </div>
                                <h4 style="color: white; margin-bottom: 10px;">Software Avanzati</h4>
                                <p style="color: var(--text-secondary); font-size: 14px;">Bambu Studio, LightBurn, Cura, Thinkercad</p>
                            </div>
                        </div>
                    </div>

                    <!-- Statistiche -->
                    <div style="background: var(--glass-bg); border-radius: 20px; padding: 40px; border: 1px solid var(--glass-border);">
                        <h3 style="color: white; margin-bottom: 40px; font-size: 24px; text-align: center;">
                            Statistiche
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 30px;">
                            <div style="text-align: center; padding: 25px; background: rgba(255,255,255,0.05); border-radius: 15px;">
                                <h4 style="color: var(--accent-color); font-size: 42px; margin-bottom: 10px; font-weight: 700;">150+</h4>
                                <p style="color: var(--text-secondary); font-size: 15px; font-weight: 500;">Prodotti Realizzati</p>
                                <div style="width: 40px; height: 3px; background: var(--accent-color); margin: 15px auto 0; border-radius: 2px;"></div>
                            </div>
                            
                            <div style="text-align: center; padding: 25px; background: rgba(255,255,255,0.05); border-radius: 15px;">
                                <h4 style="color: #00C853; font-size: 42px; margin-bottom: 10px; font-weight: 700;">98%</h4>
                                <p style="color: var(--text-secondary); font-size: 15px; font-weight: 500;">Soddisfazione Clienti</p>
                                <div style="width: 40px; height: 3px; background: #00C853; margin: 15px auto 0; border-radius: 2px;"></div>
                            </div>
                            
                            <div style="text-align: center; padding: 25px; background: rgba(255,255,255,0.05); border-radius: 15px;">
                                <h4 style="color: #9400ff; font-size: 42px; margin-bottom: 10px; font-weight: 700;">5+</h4>
                                <p style="color: var(--text-secondary); font-size: 15px; font-weight: 500;">Anni di Esperienza</p>
                                <div style="width: 40px; height: 3px; background: #9400ff; margin: 15px auto 0; border-radius: 2px;"></div>
                            </div>
                            
                            <div style="text-align: center; padding: 25px; background: rgba(255,255,255,0.05); border-radius: 15px;">
                                <h4 style="color: #FFC107; font-size: 42px; margin-bottom: 10px; font-weight: 700;">50+</h4>
                                <p style="color: var(--text-secondary); font-size: 15px; font-weight: 500;">Clienti Soddisfatti</p>
                                <div style="width: 40px; height: 3px; background: #FFC107; margin: 15px auto 0; border-radius: 2px;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Call to Action finale -->
                    <div style="text-align: center; padding: 50px 30px; background: linear-gradient(135deg, 
                                rgba(0, 198, 255, 0.1) 0%, rgba(148, 0, 255, 0.1) 100%); 
                                border-radius: 20px; border: 1px solid rgba(0, 198, 255, 0.3);">
                        <h3 style="color: white; font-size: 28px; margin-bottom: 20px;">
                            Pronto a Realizzare il Tuo Progetto?
                        </h3>
                        <p style="color: var(--text-secondary); font-size: 16px; max-width: 600px; margin: 0 auto 30px; line-height: 1.6;">
                            Che tu sia un privato, un'azienda o un creativo, siamo qui per trasformare 
                            le tue idee in oggetti unici. Contattaci per un preventivo gratuito e senza impegno.
                        </p>
                        <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                            <button class="glass-btn" data-section="contatti" style="padding: 16px 30px; font-size: 16px;">
                                <i class="fas fa-envelope"></i> Richiedi Preventivo
                            </button>
                            <button class="glass-btn btn-secondary" data-section="catalogo" style="padding: 16px 30px; font-size: 16px;">
                                <i class="fas fa-th-large"></i> Esplora Catalogo
                            </button>
                        </div>
                    </div>

                </div> <!-- Fine griglia principale -->

            </div>
        </section>

        <!-- Contatti Section -->
        <section id="contatti" class="section">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px;">
                <div style="background: var(--glass-bg); padding: 40px; border-radius: 20px;">
                    <h2 style="margin-bottom: 30px; color: var(--accent-color);">Contattaci</h2>
                    
                    <div style="margin-bottom: 30px;">
                        <h3 style="margin-bottom: 10px; color: var(--text-color);">
                            <i class="fas fa-envelope" style="color: var(--accent-color); margin-right: 10px;"></i>
                            Email
                        </h3>
                        <a href="mailto:meco.incisioni@gmail.com" style="color: var(--text-secondary); text-decoration: none;">
                            meco.incisioni@gmail.com
                        </a>
                    </div>
                    
                    <div style="margin-bottom: 30px;">
                        <h3 style="margin-bottom: 10px; color: var(--text-color);">
                            <i class="fas fa-phone" style="color: var(--accent-color); margin-right: 10px;"></i>
                            Telefono
                        </h3>
                        <div style="color: var(--text-secondary);">
                            <div>+39 347 127 4652</div>
                            <div>+39 380 645 8336</div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="margin-bottom: 10px; color: var(--text-color);">
                            <i class="fas fa-map-marker-alt" style="color: var(--accent-color); margin-right: 10px;"></i>
                            Indirizzo
                        </h3>
                        <p style="color: var(--text-secondary);">via E. Fermi (AP) 63075</p>
                    </div>
                </div>
                
                <div style="background: var(--glass-bg); padding: 40px; border-radius: 20px;">
                    <h2 style="margin-bottom: 30px; color: var(--accent-color);">Richiedi Informazioni</h2>
                    <form id="contact-form">
                        <div style="margin-bottom: 20px;">
                            <input type="text" placeholder="Nome" 
                                   style="width: 100%; padding: 15px; background: rgba(255,255,255,0.05); 
                                          border: 1px solid var(--glass-border); border-radius: 10px; 
                                          color: var(--text-color);">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <input type="email" placeholder="Email" 
                                   style="width: 100%; padding: 15px; background: rgba(255,255,255,0.05); 
                                          border: 1px solid var(--glass-border); border-radius: 10px; 
                                          color: var(--text-color);">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <textarea placeholder="Messaggio" rows="4"
                                      style="width: 100%; padding: 15px; background: rgba(255,255,255,0.05); 
                                             border: 1px solid var(--glass-border); border-radius: 10px; 
                                             color: var(--text-color);"></textarea>
                        </div>
                        <button type="submit" class="glass-btn" style="width: 100%;">
                            <span>Invia Messaggio</span>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Product Modal -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <button class="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <div id="modal-content">
                <!-- Contenuto dinamico -->
            </div>
        </div>
    </div>

    <!-- WhatsApp Floating Button -->
    <div class="whatsapp-float">
        <a href="https://wa.me/393471274652?text=Ciao%20MECO%21%20Vorrei%20informazioni%20sui%20vostri%20prodotti." 
        target="_blank" 
        class="whatsapp-btn"
        aria-label="Contattaci su WhatsApp">
            <i class="fab fa-whatsapp"></i>
            <span class="whatsapp-pulse"></span>
        </a>
    </div>

    <!-- SOSTITUISCI TUTTO IL DIV con id="promo-banner" con: -->
    <!-- Promo Banners Container -->
    <div id="promo-banners-container" style="max-width: 1200px; margin: 40px auto; padding: 0 20px;"></div>

    <!-- Template per banner promozionale -->
    <template id="promo-banner-template">
        <div class="promo-banner glass-card" data-promo-id="">
            <div class="promo-content">
                <div class="promo-badge">
                    <i class="fas fa-gift"></i>
                    <span class="promo-label">OFFERTA</span>
                </div>
                <h3 class="promo-title">Titolo Offerta</h3>
                <p class="promo-description">Descrizione offerta</p>
                
                <div class="countdown-container">
                    <div class="countdown-box">
                        <span class="countdown-number" data-type="days">00</span>
                        <span class="countdown-label">Giorni</span>
                    </div>
                    <div class="countdown-box">
                        <span class="countdown-number" data-type="hours">00</span>
                        <span class="countdown-label">Ore</span>
                    </div>
                    <div class="countdown-box">
                        <span class="countdown-number" data-type="minutes">00</span>
                        <span class="countdown-label">Minuti</span>
                    </div>
                    <div class="countdown-box">
                        <span class="countdown-number" data-type="seconds">00</span>
                        <span class="countdown-label">Secondi</span>
                    </div>
                </div>
                
                <button class="promo-btn glass-btn" data-section="catalogo">
                    <span>Sfrutta l'offerta</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            <button class="promo-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </template>

    <!-- Footer -->
    <footer class="glass-footer">
        <div class="footer-content">
            <div>
                <h3 style="margin-bottom: 20px; color: var(--accent-color);">MECO</h3>
                <p style="color: var(--text-secondary); margin-bottom: 10px;">Incisioni Laser & Stampe 3D</p>
                <p style="color: var(--text-secondary);">Precisione digitale unita all'artigianato tradizionale</p>
            </div>
            
            <div>
                <h4 style="margin-bottom: 20px; color: var(--accent-color);">Link Rapidi</h4>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <a href="#" data-section="home" style="color: var(--text-secondary); text-decoration: none;">Home</a>
                    <a href="#" data-section="catalogo" style="color: var(--text-secondary); text-decoration: none;">Catalogo</a>
                    <a href="#" data-section="chi-siamo" style="color: var(--text-secondary); text-decoration: none;">Chi Siamo</a>
                    <a href="#" data-section="contatti" style="color: var(--text-secondary); text-decoration: none;">Contatti</a>
                </div>
            </div>
            
            <div>
                <h4 style="margin-bottom: 20px; color: var(--accent-color);">Orari</h4>
                <p style="color: var(--text-secondary); margin-bottom: 10px;">Lun-Ven: 9:00 - 18:00</p>
                <p style="color: var(--text-secondary); margin-bottom: 10px;">Sab: 9:00 - 13:00</p>
                <p style="color: var(--text-secondary);">Domenica: Chiuso</p>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--glass-border);">
            <p style="color: var(--text-secondary);">
                &copy; 2024 MECO - Incisioni e Stampe 3D. Tutti i diritti riservati.
            </p>
        </div>
    </footer>

    <!-- Review Modal -->
    <div class="modal" id="review-modal">
        <div class="modal-content" style="max-width: 500px;">
            <button class="modal-close" id="review-modal-close">
                <i class="fas fa-times"></i>
            </button>
            
            <div style="text-align: center; margin-bottom: 25px;">
                <h3 style="color: var(--accent-color);">
                    <i class="fas fa-star"></i> Lascia una Recensione
                </h3>
                <p style="color: var(--text-secondary); font-size: 14px;">
                    Condividi la tua esperienza con i nostri prodotti
                </p>
            </div>
            
            <form id="review-form">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: var(--text-color);">Valutazione</label>
                    <div class="rating-stars" style="display: flex; justify-content: center; gap: 5px; margin-bottom: 15px;">
                        <i class="far fa-star" data-rating="1"></i>
                        <i class="far fa-star" data-rating="2"></i>
                        <i class="far fa-star" data-rating="3"></i>
                        <i class="far fa-star" data-rating="4"></i>
                        <i class="far fa-star" data-rating="5"></i>
                    </div>
                    <input type="hidden" id="review-rating" value="0">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: var(--text-color);">Nome (opzionale)</label>
                    <input type="text" id="review-name" 
                        placeholder="Il tuo nome"
                        style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); 
                                border: 1px solid var(--glass-border); border-radius: 10px; 
                                color: var(--text-color);">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: var(--text-color);">Prodotto (opzionale)</label>
                    <select id="review-product" 
                            style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); 
                                border: 1px solid var(--glass-border); border-radius: 10px; 
                                color: var(--text-color);">
                        <option value="">Seleziona un prodotto</option>
                        <!-- Le opzioni verranno popolate via JavaScript -->
                    </select>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <label style="display: block; margin-bottom: 8px; color: var(--text-color);">Recensione</label>
                    <textarea id="review-text" rows="4"
                            placeholder="Scrivi la tua recensione qui..."
                            style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); 
                                    border: 1px solid var(--glass-border); border-radius: 10px; 
                                    color: var(--text-color); resize: vertical;"></textarea>
                </div>
                
                <button type="submit" class="glass-btn" style="width: 100%; padding: 15px;">
                    <span>Pubblica Recensione</span>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // DATI PRODOTTI
        const productsData = {
            incisioni: [
                {
                    id: 'INC1',
                    name: 'Fiocco Nascita',
                    description: 'Fiocco nascita personalizzato, realizzato su misura per accogliere il/la nuovo/a arrivato/a con stile e dolcezza',
                    descrizioneApprofondita: 'Fiocco nascita personalizzato, ideale per celebrare il nuovo arrivo. Realizzato con materiali di qualità e curato nei dettagli, è perfetto da appendere alla porta o nella cameretta come dolce ricordo.',
                    basePrice: 30.00,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2026-05-15T00:00:00',
                            endDate: '2026-06-30T23:59:59'
                        },
                        label: 'OFFERTA ESTIVA',
                        promoId: 'estate2026'
                    },
                    category: 'bambini',
                    image: 'img/incisioni/fioccoNascita/fioccoNascita.jpeg',
                    gallery: [
                        'img/incisioni/fioccoNascita/fioccoNascita.jpeg',
                        'img/incisioni/fioccoNascita/fioccoNascita (2).jpg',
                        'img/incisioni/fioccoNascita/fioccoNascita (3).jpg',
                        'img/incisioni/fioccoNascita/fioccoNascita (4).jpg',
                        'img/incisioni/fioccoNascita/fioccoNascita (5).jpg',
                        'img/incisioni/fioccoNascita/fioccoNascita (6).jpg',
                    ],
                    customizations: {
                        wood: { label: 'Tipo di Legno', options: [
                            { name: 'Betulla', price: 0 },
                            { name: 'Balsa', price: 1 }
                        ]},
                        thickness: { label: 'Spessore', options: [
                            { name: '3mm', price: 0 }
                        ]},
                        decorazioni: { label: 'Decorazioni', options: [
                            { name: 'Solo decorazioni in legno', price: 0 },
                            { name: 'Decorazioni in legno e floreali', price: 5 },
                        ]},
                        colore: { label: 'Colore delle decorazioni', options: [
                            { name: 'Blu', price: 0 },
                            { name: 'Rosa', price: 0 },
                            { name: 'Personalizzato', price: 2 }
                        ]},
                        text: { label: 'Nome e colore personalizzato (se selezionato)', type: 'text', maxLength: 50 }
                    }
                },
                {
                    id: 'INC2',
                    name: 'Incisione su Tavolino',
                    description: 'Tavolino in legno con incisione laser personalizzabile',
                    descrizioneApprofondita: 'Tavolino elegante personalizzato con incisione laser.',
                    basePrice: 20,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2026-11-15T00:00:00', // Data/ora di inizio
                            endDate: '2026-11-30T23:59:59'    // Data/ora di fine
                        },
                        label: 'OFFERTA BLACK FRIDAY',
                        promoId: 'blackFriday2026'
                    },
                    category: 'arredamento',
                    image: 'img/incisioni/incisioneTavolino/tavolinoPubTorrione.jpeg',
                    gallery: [
                        'img/incisioni/incisioneTavolino/tavolinoPubTorrione.jpeg',
                    ],
                    customizations: {
                        dimensioni: {
                            label: 'Dimensioni',
                            options: [
                                { name: '20x20cm', price: 0 },
                                { name: '40x40cm', price: 10 },
                                { name: '50x50cm', price: 15 },
                                { name: '60x60cm', price: 20 },
                                { name: '70x70cm', price: 25 },
                                { name: '80x80cm', price: 30 }
                            ]
                        },

                        names: { label: 'Personalizzazione', type: 'text', maxLength: 100 },
                    }
                },
                {
                    id: 'INC3',
                    name: 'Foto Incisione',
                    description: 'Foto incisione personalizzata su legno, un modo per conservare i tuoi ricordi in modo unico.',
                    descrizioneApprofondita: 'Incisione su legno di una foto personalizzata, perfetta per creare un ricordo unico e duraturo. Realizzata con tecnologia laser di alta precisione, questa incisione trasforma la tua immagine in un pezzo d\'arte da esporre o regalare. <br><br> NB: per garantire la migliore qualità di incisione, è necessario inviare il file in formato immagine HD al momento dell\'ordine.',
                    basePrice: 20,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2026-11-15T00:00:00', // Data/ora di inizio
                            endDate: '2026-11-30T23:59:59'    // Data/ora di fine
                        },
                        label: 'OFFERTA BLACK FRIDAY',
                        promoId: 'blackFriday2026'
                    },
                    category: 'decorazioni',
                    image: 'img/incisioni/fotoIncisioni/fotoIncisione.jpeg',
                    gallery: [
                        'img/incisioni/fotoIncisioni/fotoIncisione.jpeg',
                    ],
                    customizations: {
                        dimensioni: {
                            label: 'Dimensioni',
                            options: [
                                { name: '10x15cm', price: 0 },
                                { name: '13x18cm', price: 3 },
                                { name: '15x20cm', price: 5 },
                                { name: '20x20cm', price: 7 },
                                { name: '20x25cm', price: 9 },
                                { name: '25x35cm', price: 10 }
                            ]
                        },

                        names: { label: 'Personalizzazione (Frase/Data/Altro)', type: 'text', maxLength: 100 },
                    }
                },
                {
                    id: 'INC4',
                    name: 'Gioco Tris Pasquale',
                    description: 'Gioco Tris in legno con incisioni pasquali, perfetto come pensiero o decorazione per la Pasqua.',
                    descrizioneApprofondita: 'Gioco Tris in legno con incisioni pasquali, ideale originale come regalo per piccini. Ogni pezzo è inciso con motivi pasquali, rendendo il gioco non solo divertente ma anche decorativo. Perfetto come regalo o come elemento di arredo per la Pasqua.',
                    basePrice: 6,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2026-03-01T00:00:00', // Data/ora di inizio
                            endDate: '2026-04-05T00:00:00'    // Data/ora di fine
                        },
                        label: 'OFFERTA DI PASQUA',
                        promoId: 'pasqua2026'
                    },
                    category: 'pasqua',
                    image: 'img/incisioni/tris/tris (2).jpg',
                    gallery: [
                        'img/incisioni/tris/tris (2).jpg',
                        'img/incisioni/tris/tris (1).jpg'
                    ],
                    customizations: {
                        quantity: { label: 'Quantità Set', options: [
                            { name: '1 pezzo', price: 0 },
                            { name: '3 pezzi', price: 18 },
                            { name: '5 pezzi', price: 30 },
                            { name: '10 pezzi', price: 60 }
                        ]},
                        colore: { label: 'Colore Cornice', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 },
                            { name: 'Viola', price: 0 },
                            { name: 'Rosa', price: 0 },
                            { name: 'Arancio', price: 0 }
                        ]},
                        colore1: { label: 'Colore Uova', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 },
                            { name: 'Viola', price: 0 },
                            { name: 'Rosa', price: 0 },
                            { name: 'Arancio', price: 0 }
                        ]},
                        colore2: { label: 'Colore Coniglietti', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 },
                            { name: 'Viola', price: 0 },
                            { name: 'Rosa', price: 0 },
                            { name: 'Arancio', price: 0 }
                        ]},

                        personalization: { label: 'Nome', type: 'text', maxLength: 20 }
                    }
                },
                {
                    id: 'INC5',
                    name: 'Rose Incise - Mamma',
                    description: 'Rose incise su legno, un regalo perfetto per la festa della mamma o per ogni occasione speciale.',
                    descrizioneApprofondita: 'Rose incise su legno, perfette per celebrare la festa della mamma o come regalo romantico. Ogni pezzo è realizzato con cura e attenzione ai dettagli, rendendo queste rose un simbolo di amore e affetto. Ideali come decorazione per la casa o come pensiero speciale per una persona cara.',
                    basePrice: 7,
                    promotion: {
                        active: false,
                        schedule: {
                            startDate: '2025-12-13T13:04:40', // Data/ora di inizio
                            endDate: '2025-12-13T13:05:30'    // Data/ora di fine
                        },
                        discount: 10, // percentuale
                        label: 'OFFERTA SAN VALENTINO',
                        promoId: 'sanvalentino2026'
                    },
                    category: 'gadget',
                    image: 'img/incisioni/rose/rose (5).jpg',
                    gallery: [
                        'img/incisioni/rose/rose (5).jpg',
                        'img/incisioni/rose/rose (2).jpg',
                        'img/incisioni/rose/rose (3).jpg',
                        'img/incisioni/rose/rose (4).jpg',
                        'img/incisioni/rose/rose (1).jpg',
                        'img/incisioni/rose/rose (6).jpg'
                    ],
                    customizations: {
                        colore: { label: 'Colore Rosa', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 },
                            { name: 'Viola', price: 0 },
                            { name: 'Rosa', price: 0 }
                        ]},
                    }
                },
                {
                    id: 'INC6',
                    name: 'Segnalibro Personalizzato',
                    description: 'Segnalibro in legno personalizzato, ideale per gli amanti della lettura e dei regali unici.',
                    descrizioneApprofondita: 'Segnalibro in legno personalizzato, perfetto per gli appassionati di lettura. Ogni segnalibro è inciso con cura e può essere personalizzato con nomi, citazioni o disegni a scelta, rendendolo un regalo unico e speciale per ogni amante dei libri.',
                    basePrice: 7,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2025-12-01T00:00:00', // Data/ora di inizio
                            endDate: '2025-12-31T23:59:59'    // Data/ora di fine
                        },
                        label: 'OFFERTA NATALIZIA',
                        promoId: 'natale2025'
                    },
                    category: 'gadget',
                    image: 'img/incisioni/segnalibro/segnalibro (2).jpg',
                    gallery: [
                        'img/incisioni/segnalibro/segnalibro (2).jpg',
                        'img/incisioni/segnalibro/segnalibro (1).jpg'
                    ],
                    customizations: {
                        colore: { label: 'Colore Nappina', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 },
                            { name: 'Viola', price: 0 },
                            { name: 'Rosa', price: 0 },
                            { name: 'Arancio', price: 0 }
                        ]},

                        personalization: { label: 'Personalizzazione', type: 'text', maxLength: 100 }
                    }
                },
                {
                    id: 'INC7',
                    name: 'Stemmi Harry Potter Multistrato',
                    description: 'Stemmi di Harry Potter in legno multistrato, perfetti per decorare la tua casa o come regalo per i fan della saga.',
                    descrizioneApprofondita: 'Ogni stemma è inciso con precisione e può essere appeso o esposto su una mensola, aggiungendo un tocco magico a qualsiasi ambiente.',
                    basePrice: 15,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2026-10-15T00:00:00', // Data/ora di inizio
                            endDate: '2026-11-14T23:59:59'    // Data/ora di fine
                        },
                        label: 'OFFERTA HARRY POTTER',
                        promoId: 'harrypotter2026'
                    },
                    category: 'decorazioni',
                    image: 'img/incisioni/stemmi/Incisioni.png',
                    gallery: [
                        'img/incisioni/stemmi/Incisioni.png',
                        'img/incisioni/stemmi/stemmi (4).jpg',
                        'img/incisioni/stemmi/stemmi (1).jpg',
                        'img/incisioni/stemmi/stemmi (2).jpg',
                        'img/incisioni/stemmi/stemmi (3).jpg',
                    ],
                    customizations: {
                        pack: { label: 'Pacchetto', options: [
                            { name: '1 stemma', price: 0 },
                            { name: '2 stemmi', price: 30 },
                            { name: '3 stemmi', price: 45 },
                            { name: '4 stemmi', price: 60 },
                            { name: '5 stemmi', price: 70 }
                        ]},
                    }
                }
            ],
            stampe3d: [
                {
                    id: 'ST3D1',
                    name: 'Scacchiera - Harry Potter',
                    description: 'Scacchiera in plastica PLA con base in legno compensato',
                    descrizioneApprofondita: 'Scacchiera ispirata al magico mondo di Harry Potter, perfetta per collezionisti e appassionati. La base è realizzata in legno compensato resistente, mentre tabellone e pedine sono stampati in 3D con plastica di alta qualità, per un design dettagliato e duraturo. Ideale come regalo o per aggiungere un tocco di magia alle tue partite a scacchi.',
                    basePrice: 40,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2026-10-15T00:00:00', // Data/ora di inizio
                            endDate: '2026-11-14T23:59:59'    // Data/ora di fine
                        },
                        label: 'OFFERTA HARRY POTTER',
                        promoId: 'harrypotter2026'
                    },
                    category: 'giochi',
                    image: 'img/stampe3D/scacchiera/Stampe3D.png',
                    gallery: [
                        'img/stampe3D/scacchiera/Stampe3D.png',
                        'img/stampe3D/scacchiera/scacchiera1.jpg',
                        'img/stampe3D/scacchiera/scacchiera2.jpg',
                        'img/stampe3D/scacchiera/scacchiera3.jpg',
                        'img/stampe3D/scacchiera/scacchiera4.jpg',
                        'img/stampe3D/scacchiera/scacchiera5.jpg'
                    ],
                    customizations: {
                        colore: { label: 'Colore Squadra 1', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 }
                        ]},
                        colore1: { label: 'Colore Squadra 2', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 }
                        ]},
                        colore2: { label: 'Colore Legno di Base', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 1  },
                            { name: 'Giallo', price: 1  },
                            { name: 'Blu', price: 1 },
                            { name: 'Verde', price: 1 }
                        ]},
                        quality: { label: 'Risoluzione', options: [
                            { name: 'Draft (0.3mm)', price: 0 },
                            { name: 'Standard (0.2mm)', price: 0 },
                            { name: 'High Quality (0.16mm)', price: 3 },
                            { name: 'Fine (0.12mm)', price: 5 },
                            { name: 'Ultra Fine (0.08mm)', price: 7 }
                        ]},
                        text: { label: 'Testo Personalizzato', type: 'text', maxLength: 50 }
                    }
                },
                {
                    id: 'ST3D2',
                    name: 'Stand per bacchette - Harry Potter',
                    description: 'Stand in plastica stampata in 3D per esporre le bacchette di Harry Potter, ideale per collezionisti.',
                    descrizioneApprofondita: 'Stand realizzato interamente in plastica stampata in 3D, progettato per esporre in modo elegante e ordinato le bacchette ispirate al mondo di Harry Potter. Robusto e curato nei dettagli, offre un supporto stabile e scenografico per la tua collezione, perfetto per fan e collezionisti della saga. (Tema Doni della Morte)',
                    basePrice: 30,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2026-10-15T00:00:00', // Data/ora di inizio
                            endDate: '2026-11-14T23:59:59'    // Data/ora di fine
                        },
                        label: 'OFFERTA HARRY POTTER',
                        promoId: 'harrypotter2026'
                    },
                    category: 'arredamento',
                    image: 'img/stampe3D/portaBacchette/harryPotterWand.jpeg',
                    gallery: [
                        'img/stampe3D/portaBacchette/harryPotterWand.jpeg',
                        'img/stampe3D/portaBacchette/wandStand (1).jpg',
                        'img/stampe3D/portaBacchette/wandStand (2).jpg',
                        'img/stampe3D/portaBacchette/wandStand (3).jpg',
                        'img/stampe3D/portaBacchette/wandStand (4).jpg'
                    ],
                    customizations: {
                        colore: { label: 'Colore', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 1  },
                            { name: 'Giallo', price: 1  },
                            { name: 'Blu', price: 1 },
                            { name: 'Verde', price: 1 },
                            { name: 'Oro', price: 1 },
                            { name: 'Argento', price: 1 },
                        ]},
                        colore1: { label: 'Colore Cornice', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 1  },
                            { name: 'Giallo', price: 1  },
                            { name: 'Blu', price: 1 },
                            { name: 'Verde', price: 1 },
                            { name: 'Oro', price: 1 },
                            { name: 'Argento', price: 1 },
                            { name: 'Azzurro (Fluorescente)', price: 3 }
                        ]},
                        quality: { label: 'Risoluzione', options: [
                            { name: 'Draft (0.3mm)', price: 0 },
                            { name: 'Standard (0.2mm)', price: 0 },
                            { name: 'High Quality (0.16mm)', price: 3 },
                            { name: 'Fine (0.12mm)', price: 5 },
                            { name: 'Ultra Fine (0.08mm)', price: 7 }
                        ]},
                    }
                },
                {
                    id: 'ST3D3',
                    name: 'Abat-jour',
                    description: 'Abat-jour in plastica stampata in 3D dal design moderno, ideale per arredare con stile.',
                    descrizioneApprofondita: 'Abat-jour elegante e moderno, realizzato in plastica stampata in 3D. Il design unico e contemporaneo lo rende perfetto per ogni ambiente, dalla camera da letto al soggiorno. Disponibile in diverse colorazioni, è un complemento d\'arredo che unisce funzionalità e stile.',
                    basePrice: 50,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2026-05-15T00:00:00',
                            endDate: '2026-06-30T23:59:59'
                        },
                        label: 'OFFERTA ESTIVA',
                        promoId: 'estate2026'
                    },
                    category: 'arredamento',
                    image: 'img/stampe3D/luci/lampada3D.jpeg',
                    gallery: [
                        'img/stampe3D/luci/lampada3D.jpeg',
                        'img/stampe3D/luci/lampada (1).jpg',
                        'img/stampe3D/luci/lampada (2).jpg',
                        'img/stampe3D/luci/lampada (3).jpg',
                        'img/stampe3D/luci/lampada (4).jpg',
                        'img/stampe3D/luci/lampada (5).jpg'
                    ],
                    customizations: {
                        colore: { label: 'Colore della Base', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 },
                            { name: 'Personalizzato', price: 0 }
                        ]},
                        quality: { label: 'Risoluzione', options: [
                            { name: 'Draft (0.3mm)', price: 0 },
                            { name: 'Standard (0.2mm)', price: 0 },
                            { name: 'High Quality (0.16mm)', price: 6 },
                            { name: 'Fine (0.12mm)', price: 8 },
                            { name: 'Ultra Fine (0.08mm)', price: 10 }
                        ]},

                        personalization: { label: 'Inserire il colore personalizzato se selezionato', type: 'text', maxLength: 30 }
                    }
                },
                {
                    id: 'ST3D4',
                    name: 'Elefantino effetto uncinetto',
                    description: 'Elefantino decorativo stampato in 3D con effetto uncinetto, ideale per arredare, come regalo, come segnaposto per un battesimo.',
                    descrizioneApprofondita: 'Elefantino decorativo stampato in 3D con effetto uncinetto, perfetto per aggiungere un tocco di originalità e stile alla tua casa o come idea regalo unica. Realizzato con cura e attenzione ai dettagli, è ideale anche come segnaposto per battesimi o come decorazione per la cameretta dei bambini.',
                    basePrice: 4,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2026-05-15T00:00:00',
                            endDate: '2026-06-30T23:59:59'
                        },
                        label: 'OFFERTA ESTIVA',
                        promoId: 'estate2026'
                    },
                    category: 'decorazioni',
                    image: 'img/stampe3D/segnaposto/segnapostoBattesimo.jpeg',
                    gallery: [
                        'img/stampe3D/segnaposto/segnapostoBattesimo.jpeg',
                        'img/stampe3D/segnaposto/elefantinoMaglia (1).jpg',
                        'img/stampe3D/segnaposto/elefantinoMaglia (2).jpg',
                        'img/stampe3D/segnaposto/elefantinoMaglia (3).jpg',
                        'img/stampe3D/segnaposto/elefantinoMaglia (4).jpg',
                        'img/stampe3D/segnaposto/elefantinoMaglia (5).jpg',
                    ],
                    customizations: {
                        quality: { label: 'Risoluzione', options: [
                            { name: 'Draft (0.3mm)', price: 0 },
                            { name: 'Standard (0.2mm)', price: 0 },
                            { name: 'High Quality (0.16mm)', price: 1 },
                            { name: 'Fine (0.12mm)', price: 2 },
                            { name: 'Ultra Fine (0.08mm)', price: 3 }
                        ]},
                        colore1: { label: 'Colore Elefantino', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 },
                            { name: 'Personalizzato', price: 0 }
                        ]},
                        colore2: { label: 'Colore Cuore', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 },
                            { name: 'Personalizzato', price: 0 }
                        ]},
                        personalization: { label: 'Inserire i colori personalizzati se selezionati (in ordine)', type: 'text', maxLength: 30 }
                    }
                },
                {
                    id: 'ST3D5',
                    name: 'Scritta centrotavola',
                    description: 'Scritta personalizzata in plastica stampata in 3D, ideale come centrotavola per battesimi, comunioni, cresime, matrimoni, o altri eventi speciali.',
                    descrizioneApprofondita: 'Realizzata con cura e attenzione ai dettagli, questa scritta può essere personalizzata con nomi, date o frasi significative, rendendo ogni evento ancora più speciale e memorabile.',
                    basePrice: 25,
                    promotion: {
                        active: true,
                        discount: 10, // percentuale
                        schedule: {
                            startDate: '2026-05-15T00:00:00',
                            endDate: '2026-06-30T23:59:59'
                        },
                        label: 'OFFERTA ESTIVA',
                        promoId: 'estate2026'
                    },
                    category: 'decorazioni',
                    image: 'img/stampe3D/scritta/scritta (3).jpg',
                    gallery: [
                        'img/stampe3D/scritta/scritta (3).jpg',
                        'img/stampe3D/scritta/scritta (2).jpg',
                        'img/stampe3D/scritta/scritta (1).jpg'
                    ],
                    customizations: {
                        dimensioni: { label: 'Dimensioni Cubi', options: [
                            { name: '8x8x5', price: 0 },
                            { name: '8x8x8', price: 5 },
                            { name: '10x10x10', price: 10 }
                        ]},
                        quantità: { label: 'Quantità delle Lettere', options: [
                            { name: '3-5', price: 0 },
                            { name: '6-9', price: 5 },
                            { name: '10-x', price: 10 }
                        ]},
                        quality: { label: 'Risoluzione', options: [
                            { name: 'Draft (0.3mm)', price: 0 },
                            { name: 'Standard (0.2mm)', price: 0 },
                            { name: 'High Quality (0.16mm)', price: 3 },
                            { name: 'Fine (0.12mm)', price: 5 },
                            { name: 'Ultra Fine (0.08mm)', price: 7 }
                        ]},
                        colore: { label: 'Colore Cubi', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 },
                            { name: 'Arancio', price: 0 },
                            { name: 'Rosa', price: 0 },
                            { name: 'Viola', price: 0 },
                            { name: 'Personalizzato', price: 0 }
                        ]},
                        colors: { label: 'Colore Lettere', options: [
                            { name: 'Nero', price: 0 },
                            { name: 'Rosso', price: 0  },
                            { name: 'Giallo', price: 0  },
                            { name: 'Blu', price: 0 },
                            { name: 'Verde', price: 0 },
                            { name: 'Oro', price: 0 },
                            { name: 'Argento', price: 0 },
                            { name: 'Arancio', price: 0 },
                            { name: 'Rosa', price: 0 },
                            { name: 'Viola', price: 0 },
                            { name: 'Personalizzato', price: 0 }
                        ]},
                        personalization: { label: 'Inserire i colori personalizzati se selezionati (in ordine)', type: 'text', maxLength: 30 }
                    }
                },
            ]
        };

        // APP PRINCIPALE
        class MECOWebsite {
            constructor() {
                console.log('🔄 Costruttore MECOWebsite chiamato');
                this.currentProduct = null;
                this.currentTotal = 0;
                this.favorites = JSON.parse(localStorage.getItem('meco_favorites')) || [];
                this.countdownInterval = null;
                this.promotionCheckInterval = null; // Nuovo intervallo per promozioni
                
                // Carica recensioni
                const savedReviews = localStorage.getItem('meco_reviews');
                if (savedReviews) {
                    this.reviewsData = JSON.parse(savedReviews);
                } else {
                    this.reviewsData = [];
                    localStorage.setItem('meco_reviews', JSON.stringify(this.reviewsData));
                }
                
                // IMPORTANTE: Aggiorna subito lo stato delle promozioni
                this.updatePromotionsStatus();

                // Inizializza mappa per countdown
                this.promoCountdownIntervals = new Map();
                
                this.init();
            }

            displayFavorites() {
                console.log('❤️ Caricamento preferiti...');
                
                const container = document.getElementById('favorites-container');
                const emptyMsg = document.getElementById('favorites-empty');
                const countText = document.getElementById('favorites-count-text');
                
                if (!container) {
                    console.error('❌ Container preferiti non trovato!');
                    return;
                }
                
                const favoriteProducts = this.getFavoriteProducts();
                console.log('Prodotti preferiti trovati:', favoriteProducts.length);
                
                // Aggiorna testo contatore
                if (countText) {
                    const count = favoriteProducts.length;
                    countText.textContent = `Hai ${count} prodotto${count !== 1 ? 'i' : ''} nei preferiti`;
                }
                
                if (favoriteProducts.length === 0) {
                    container.innerHTML = '';
                    if (emptyMsg) {
                        emptyMsg.style.display = 'block';
                        console.log('Mostro messaggio "nessun preferito"');
                    }
                    return;
                }
                
                // Nascondi messaggio vuoto
                if (emptyMsg) emptyMsg.style.display = 'none';
                
                // Pulisci container
                container.innerHTML = '';
                
                // Mostra prodotti
                favoriteProducts.forEach(product => {
                    const isFavorite = this.isFavorite(product.id);
                    const hasPromo = product.promotion && 
                                    product.promotion.active && 
                                    this.isPromotionValid(product.promotion);
                    const finalPrice = this.getDiscountedPrice(product);
                    
                    const card = document.createElement('div');
                    card.className = 'product-card';
                    card.setAttribute('data-product-id', product.id);
                    
                    card.innerHTML = `
                        <div class="product-image" style="position: relative;">
                            <img src="${product.image}" alt="${product.name}" 
                                loading="lazy" 
                                style="width: 100%; height: 100%; object-fit: cover;"
                                onerror="this.src='https://via.placeholder.com/400x300/1e2a4a/00c6ff?text=Product+Image'">
                            
                            ${hasPromo ? `
                            <div class="product-promo-badge">
                                <i class="fas fa-gift"></i> 
                                ${product.promotion.label || `${product.promotion.discount}% OFF`}
                            </div>
                            ` : ''}
                            
                            <button class="favorite-btn active" 
                                    data-product-id="${product.id}"
                                    onclick="window.app.toggleFavorite('${product.id}', event)"
                                    style="position: absolute; top: 15px; right: 15px; z-index: 10;">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                        <div class="product-info">
                            <span class="product-category">${this.getCategoryLabel(product.category)}</span>
                            <h3>${product.name}</h3>
                            <p class="product-description">${product.description}</p>
                            
                            <div class="product-price">
                                ${hasPromo ? `
                                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                                        <span class="original-price">€${product.basePrice.toFixed(2)}</span>
                                        <span class="promo-price">€${finalPrice.toFixed(2)}</span>
                                        <span style="color: #ff4757; font-size: 14px; font-weight: 600; 
                                                background: rgba(255, 71, 87, 0.1); padding: 4px 8px; 
                                                border-radius: 12px;">
                                            -${product.promotion.discount}%
                                        </span>
                                    </div>
                                ` : `
                                    <span style="font-size: 24px; font-weight: 700; color: var(--accent-color);">
                                        €${product.basePrice.toFixed(2)}
                                    </span>
                                `}
                            </div>
                            
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button class="glass-btn view-details-btn" 
                                        data-product-id="${product.id}"
                                        style="flex: 1;">
                                    <span>Dettagli</span>
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(card);
                });
                
                // ATTACCA GLI EVENT LISTENER DOPO aver creato tutto il contenuto
                this.attachFavoritesEventListeners();
                
                console.log('✅ Preferiti caricati e event listener attaccati');
            }

            // Controlla se un'orario è valido per la promozione
            isPromotionScheduled(promotion) {
                if (!promotion || !promotion.schedule) {
                    return false;
                }
                
                const now = new Date();
                
                try {
                    // Converti le date - IMPORTANTE: gestisci il fuso orario
                    const startDate = new Date(promotion.schedule.startDate);
                    const endDate = new Date(promotion.schedule.endDate);
                    
                    console.log('🔍 Controllo promozione:', {
                        prodotto: 'Rose',
                        oraLocale: now.toLocaleString('it-IT'),
                        oraISO: now.toISOString(),
                        inizioLocale: startDate.toLocaleString('it-IT'),
                        fineLocale: endDate.toLocaleString('it-IT'),
                        inizioISO: startDate.toISOString(),
                        fineISO: endDate.toISOString(),
                        dopoInizio: now >= startDate,
                        primaFine: now <= endDate,
                        attiva: (now >= startDate) && (now <= endDate)
                    });
                    
                    // Controlla se le date sono valide
                    if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {
                        console.error('❌ Date non valide');
                        return false;
                    }
                    
                    // Controlla se siamo nel periodo
                    const isActive = (now >= startDate) && (now <= endDate);
                    
                    return isActive;
                    
                } catch (error) {
                    console.error('❌ Errore nel controllo:', error);
                    return false;
                }
            }

            // Raggruppa tutte le promozioni attive per tipo
            getActivePromotions() {
                const allProducts = [...productsData.incisioni, ...productsData.stampe3d];
                const promotionsMap = new Map();
                
                console.log('🔍 Ricerca promozioni attive...');
                
                allProducts.forEach(product => {
                    if (product.promotion && 
                        product.promotion.active && 
                        this.isPromotionValid(product.promotion)) {
                        
                        // Usa label come fallback se non c'è promoId
                        const promoKey = product.promotion.promoId || 
                                        product.promotion.label?.replace(/\s+/g, '_').toLowerCase() || 
                                        'generic_promo';
                        
                        console.log(`✓ ${product.name}: ${promoKey} (${product.promotion.discount}%)`);
                        
                        if (!promotionsMap.has(promoKey)) {
                            promotionsMap.set(promoKey, {
                                id: promoKey,
                                label: product.promotion.label || 'Offerta Speciale',
                                endDate: product.promotion.schedule ? 
                                        new Date(product.promotion.schedule.endDate) : 
                                        new Date('2025-12-31T23:59:59'),
                                discount: product.promotion.discount || 10,
                                products: []
                            });
                        }
                        
                        promotionsMap.get(promoKey).products.push(product.name);
                    }
                });
                
                const result = Array.from(promotionsMap.values());
                console.log(`Trovate ${result.length} promozioni attive`);
                return result;
            }

            // Aggiungi questa funzione per debug
            debugPromotions() {
                const allProducts = [...productsData.incisioni, ...productsData.stampe3d];
                
                console.log('=== DEBUG PROMOZIONI ===');
                console.log('Ora attuale:', new Date().toISOString());
                
                allProducts.forEach(product => {
                    if (product.promotion && product.promotion.schedule) {
                        console.log(`Prodotto: ${product.name}`);
                        console.log(`  Start: ${product.promotion.schedule.startDate}`);
                        console.log(`  End: ${product.promotion.schedule.endDate}`);
                        console.log(`  Active (calcolato): ${this.isPromotionScheduled(product.promotion)}`);
                        console.log(`  Active (attuale): ${product.promotion.active}`);
                        console.log('---');
                    }
                });
            }

            // Controlla se la promozione è valida (ora e data)
            isPromotionValid(promotion) {
                if (!promotion) return false;
                
                // Se c'è una programmazione, controlla quella
                if (promotion.schedule) {
                    return this.isPromotionScheduled(promotion);
                }
                
                // Altrimenti usa il vecchio sistema
                if (promotion.endDate) {
                    const now = new Date();
                    const endDate = new Date(promotion.endDate);
                    return now <= endDate;
                }
                
                // Se non c'è endDate, è sempre valida
                return true;
            }

            // Sostituisci la funzione updatePromotionsStatus con questa:
            updatePromotionsStatus() {
                console.log('⏰ Aggiornamento stato promozioni...');
                
                const allProducts = [...productsData.incisioni, ...productsData.stampe3d];
                const now = new Date();
                let changed = false;
                
                allProducts.forEach(product => {
                    if (product.promotion && product.promotion.schedule) {
                        try {
                            const startDate = new Date(product.promotion.schedule.startDate);
                            const endDate = new Date(product.promotion.schedule.endDate);
                            
                            // Determina se dovrebbe essere attiva
                            const shouldBeActive = (now >= startDate) && (now <= endDate);
                            
                            // Se c'è un cambiamento, aggiorna
                            if (product.promotion.active !== shouldBeActive) {
                                product.promotion.active = shouldBeActive;
                                changed = true;
                                
                                console.log(`🔄 ${product.name}: ${shouldBeActive ? 'ATTIVATA' : 'DISATTIVATA'}`);
                                
                                // Se una promozione è appena scaduta, ferma il countdown
                                if (!shouldBeActive && product.promotion.promoId) {
                                    this.stopPromoCountdown(product.promotion.promoId);
                                }
                            }
                            
                        } catch (error) {
                            console.error(`Errore in ${product.name}:`, error);
                        }
                    }
                });
                
                if (changed) {
                    console.log('✅ Stati promozioni aggiornati');
                    // Aggiorna i banner
                    this.updatePromoBanners();
                    this.filterProducts();
                }
                
                return changed;
            }

            // Avvia il controllo periodico delle promozioni
            startPromotionChecker() {
                // Controlla ogni minuto se una promozione deve iniziare/finire
                setInterval(() => {
                    this.updatePromotionsStatus();
                    this.updatePromoBannerVisibility();
                    this.filterProducts(); // Aggiorna la vista catalogo
                }, 60000); // Ogni minuto
            }

            // Nuovo metodo per attaccare gli event listener
            attachFavoritesEventListeners() {
                const container = document.getElementById('favorites-container');
                if (!container) return;
                
                console.log('🔗 Attacco event listener per preferiti...');
                
                // 1. Pulsanti "Dettagli"
                container.querySelectorAll('.view-details-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const productId = button.getAttribute('data-product-id');
                        console.log('🔍 Apertura dettagli prodotto:', productId);
                        
                        if (productId) {
                            this.openProductModal(productId);
                        } else {
                            console.error('❌ Product ID non trovato');
                        }
                    });
                });
                
                // 3. Click sulla card intera (opzionale)
                container.querySelectorAll('.product-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        // Se non si è cliccato su un bottone, apri i dettagli
                        if (!e.target.closest('button')) {
                            const productId = card.getAttribute('data-product-id');
                            if (productId) {
                                this.openProductModal(productId);
                            }
                        }
                    });
                });
                
                console.log('✅ Event listener per preferiti attaccati');
            }

            // ============ FAVORITES SYSTEM ============
            toggleFavorite(productId, event) {
                if (event) event.stopPropagation();
                
                const index = this.favorites.indexOf(productId);
                
                if (index === -1) {
                    this.favorites.push(productId);
                    if (event) {
                        const btn = event.target.closest('.favorite-btn');
                        if (btn) btn.classList.add('active');
                    }
                } else {
                    this.favorites.splice(index, 1);
                    if (event) {
                        const btn = event.target.closest('.favorite-btn');
                        if (btn) btn.classList.remove('active');
                    }
                }
                
                localStorage.setItem('meco_favorites', JSON.stringify(this.favorites));
                this.updateFavoritesCount();
                
                if (document.getElementById('favorites')) {
                    this.displayFavorites();
                }
            }

            isFavorite(productId) {
                return this.favorites.includes(productId);
            }

            getFavoritesCount() {
                return this.favorites.length;
            }

            updateFavoritesCount() {
                const count = this.favorites.length;
                const counter = document.querySelector('.favorites-count');
                if (counter) {
                    counter.textContent = count;
                    counter.style.display = count > 0 ? 'flex' : 'none';
                }
            }

            getFavoriteProducts() {
                const allProducts = [...productsData.incisioni, ...productsData.stampe3d];
                return allProducts.filter(product => this.favorites.includes(product.id));
            }

            getCategoryLabel(category) {
                const labels = {
                    'bambini': 'Bambini',
                    'arredamento': 'Arredamento',
                    'decorazioni': 'Decorazioni',
                    'pasqua': 'Pasqua',
                    'gadget': 'Gadget',
                    'giochi': 'Giochi'
                };
                return labels[category] || category;
            }

            init() {
                console.log('🚀 Inizializzazione MECO Website');
                
                // Setup base
                this.setupNavigation();
                this.setupMobileMenu();
                this.loadProducts();
                this.setupFilters();
                this.setupModal();
                this.setupContactForm();
                
                // Setup favoriti
                this.updateFavoritesCount();
                
                // Setup recensioni
                setTimeout(() => {
                    console.log('📝 Caricamento recensioni...');
                    this.setupReviewsSystem();
                    this.updateReviewsDisplay();
                }, 100);
                
                // Setup promozioni - IMPORTANTE: PRIMA startPromotions, POI banner
                this.startPromotions();
                this.updatePromoBannerVisibility();
                this.updatePromoBanners(); // ← NUOVO: invece di updatePromoBannerVisibility()
                this.updatePromoPrices();
                
                console.log('✅ Inizializzazione completata');
            }

            // Nuova funzione per gestire promozioni
            startPromotions() {
                console.log('🎯 Avvio sistema promozioni');
                
                // Aggiorna subito lo stato
                this.updatePromotionsStatus();
                
                // Avvia controllo ogni 30 secondi (per test, poi puoi mettere 60 secondi)
                this.promotionCheckInterval = setInterval(() => {
                    console.log('⏱️ Controllo periodico promozioni...');
                    this.updatePromotionsStatus();
                }, 30000); // 30 secondi
                
                // Aggiorna anche il countdown ogni secondo
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                }
                
                this.countdownInterval = setInterval(() => {
                    this.updatePromoCountdown();
                }, 1000);
            }

            setupReviewsSystem() {
                console.log('📝 Setup sistema recensioni...');
                
                // Verifica che la sezione recensioni esista
                const recensioniSection = document.getElementById('recensioni');
                console.log('Sezione recensioni trovata:', !!recensioniSection);
                
                if (!recensioniSection) {
                    console.error('❌ Sezione recensioni non trovata!');
                    return;
                }
                
                // Setup modal recensioni
                const reviewModal = document.getElementById('review-modal');
                if (reviewModal) {
                    this.setupReviewModal();
                    console.log('✅ Modal recensioni configurato');
                } else {
                    console.warn('⚠️ Modal recensioni non trovato');
                }
                
                // Setup bottone per aggiungere recensioni
                const addReviewBtn = document.getElementById('add-review-btn');
                if (addReviewBtn) {
                    addReviewBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.openReviewModal();
                    });
                    console.log('✅ Bottone aggiungi recensione configurato');
                } else {
                    console.warn('⚠️ Bottone aggiungi recensione non trovato');
                }
                
                // Carica recensioni
                this.loadReviews();
                console.log('✅ Recensioni caricate:', this.reviewsData.length);
                
                // Setup carousel
                this.setupReviewsCarousel();
                console.log('✅ Carousel recensioni configurato');
                
                // Aggiorna statistiche
                this.updateReviewsDisplay();
                console.log('✅ Statistiche recensioni aggiornate');
                
                console.log('✅ Sistema recensioni inizializzato');
            }

            resetRatingStars() {
                const stars = document.querySelectorAll('#review-modal .rating-stars i');
                const ratingInput = document.getElementById('review-rating');
                
                if (ratingInput) ratingInput.value = '0';
                
                stars.forEach(star => {
                    star.classList.add('far');
                    star.classList.remove('fas', 'active');
                });
            }

            openReviewModal() {
                console.log('📨 Apro modal recensioni');
                
                const modal = document.getElementById('review-modal');
                if (!modal) {
                    alert('Errore: modal non trovato');
                    return;
                }
                
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                
                setTimeout(() => {
                    modal.classList.add('active');
                }, 10);
                
                // Reset form
                const form = document.getElementById('review-form');
                if (form) form.reset();
                
                this.resetRatingStars();
                this.populateProductDropdown();
            }

            

            closeReviewModal() {
                const modal = document.getElementById('review-modal');
                if (!modal) return;
                
                modal.classList.remove('active');
                
                setTimeout(() => {
                    modal.style.display = 'none';
                    document.body.style.overflow = '';
                }, 300);
            }

            setupNavigation() {
                document.querySelectorAll('[data-section]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = btn.getAttribute('data-section');
                        this.switchSection(section);
                    });
                });
            }

            // Calcola la media delle recensioni
            calculateAverageRating() {
                if (this.reviewsData.length === 0) return 0;
                
                const total = this.reviewsData.reduce((sum, review) => sum + review.rating, 0);
                return total / this.reviewsData.length;
            }

            // Formatta la media (es. 4.9)
            formatAverageRating() {
                const average = this.calculateAverageRating();
                return average.toFixed(1); // 4.9
            }

            // Aggiorna il display delle recensioni nella home
            updateReviewsDisplay() {
                const totalReviews = this.reviewsData.length;
                
                if (totalReviews === 0) {
                    // Se non ci sono recensioni, mostra valori di default
                    const reviewBadge = document.querySelector('#recensioni span[style*="background: rgba(255, 193, 7, 0.1)"]');
                    if (reviewBadge) {
                        reviewBadge.innerHTML = `
                            <i class="fas fa-medal" style="margin-right: 6px;"></i>
                            0/5 • 0 Recensioni
                        `;
                    }
                    
                    // Mostra messaggio "nessuna recensione"
                    const starsContainer = document.querySelector('#recensioni div[style*="display: flex"]');
                    if (starsContainer) {
                        starsContainer.innerHTML = '';
                        for (let i = 0; i < 5; i++) {
                            const star = document.createElement('i');
                            star.className = 'far fa-star';
                            star.style.cssText = 'color: #FFC107; font-size: 24px; margin-right: 2px; opacity: 0.5;';
                            starsContainer.appendChild(star);
                        }
                    }
                    
                    return;
                }
                
                // Calcola media
                const average = this.calculateAverageRating();
                const averageFormatted = average.toFixed(1);
                
                // Aggiorna il badge
                const reviewBadge = document.querySelector('#recensioni span[style*="background: rgba(255, 193, 7, 0.1)"]');
                if (reviewBadge) {
                    reviewBadge.innerHTML = `
                        <i class="fas fa-medal" style="margin-right: 6px;"></i>
                        ${averageFormatted}/5 • ${totalReviews} Recension${totalReviews !== 1 ? 'i' : 'e'}
                    `;
                }
                
                // Aggiorna le stelle
                const starsContainer = document.querySelector('#recensioni div[style*="display: flex"]');
                if (starsContainer) {
                    starsContainer.innerHTML = '';
                    const rating = parseFloat(averageFormatted);
                    
                    for (let i = 1; i <= 5; i++) {
                        const star = document.createElement('i');
                        
                        if (i <= Math.floor(rating)) {
                            // Stella piena
                            star.className = 'fas fa-star';
                        } else if (i === Math.ceil(rating) && rating % 1 >= 0.3 && rating % 1 < 0.8) {
                            // Mezza stella
                            star.className = 'fas fa-star-half-alt';
                        } else if (i === Math.ceil(rating) && rating % 1 < 0.3) {
                            // Stella vuota ma con colore
                            star.className = 'far fa-star';
                        } else if (i === Math.ceil(rating) && rating % 1 >= 0.8) {
                            // Quasi piena, mostra piena
                            star.className = 'fas fa-star';
                        } else {
                            // Stella vuota
                            star.className = 'far fa-star';
                        }
                        
                        star.style.cssText = 'color: #FFC107; font-size: 24px; margin-right: 2px;';
                        starsContainer.appendChild(star);
                    }
                }
                
                // Aggiorna testo descrittivo
                const reviewStats = document.querySelector('#recensioni p[style*="color: var(--text-secondary)"]');
                if (reviewStats) {
                    const percentage = Math.round((average / 5) * 100);
                    reviewStats.textContent = `La soddisfazione dei nostri clienti è la nostra migliore testimonianza • ${percentage}% soddisfazione`;
                }
                
                console.log(`📊 Statistiche aggiornate: ${averageFormatted}/5 da ${totalReviews} recensioni`);
            }

            setupMobileMenu() {
                console.log('📱 SETUP MENU MOBILE - Versione semplificata');
                
                const menuBtn = document.querySelector('.mobile-menu-btn');
                const navMenu = document.querySelector('.nav-menu');
                
                if (!menuBtn || !navMenu) {
                    console.error('❌ Elementi menu non trovati');
                    return;
                }
                
                console.log('✅ Elementi trovati:', {
                    btn: menuBtn.outerHTML.substring(0, 50),
                    menu: navMenu.outerHTML.substring(0, 50)
                });
                
                // Rimuovi overlay se esiste già
                const existingOverlay = document.querySelector('.mobile-menu-overlay');
                if (existingOverlay) {
                    existingOverlay.remove();
                }
                
                // Crea un overlay semplice
                const overlay = document.createElement('div');
                overlay.className = 'mobile-menu-overlay';
                document.body.appendChild(overlay);
                
                // Stato del menu
                let isOpen = false;
                
                // Funzione per aprire il menu
                const openMenu = () => {
                    console.log('👉 APRO menu');
                    navMenu.classList.add('active');
                    overlay.classList.add('active');
                    menuBtn.classList.add('active');
                    menuBtn.querySelector('i').className = 'fas fa-times';
                    document.body.style.overflow = 'hidden';
                    isOpen = true;
                };
                
                // Funzione per chiudere il menu
                const closeMenu = () => {
                    console.log('👈 CHIUDO menu');
                    navMenu.classList.remove('active');
                    overlay.classList.remove('active');
                    menuBtn.classList.remove('active');
                    menuBtn.querySelector('i').className = 'fas fa-bars';
                    document.body.style.overflow = '';
                    isOpen = false;
                };
                
                // Toggle menu
                const toggleMenu = () => {
                    if (isOpen) {
                        closeMenu();
                    } else {
                        openMenu();
                    }
                };
                
                // 1. Click sul bottone hamburger
                menuBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('🟡 CLICK su bottone menu');
                    toggleMenu();
                });
                
                // 2. Click sull'overlay (chiudi)
                overlay.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('🟡 CLICK su overlay');
                    closeMenu();
                });
                
                // 3. Click sui link di navigazione - VERSIONE SEMPLIFICATA
                navMenu.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const sectionId = this.getAttribute('data-section');
                        console.log('🔗 CLICK su link:', sectionId);
                        
                        // Chiudi il menu
                        closeMenu();
                        
                        // Aspetta che il menu si chiuda, poi cambia sezione
                        setTimeout(() => {
                            if (sectionId && window.app) {
                                console.log('🔄 Cambio a sezione:', sectionId);
                                window.app.switchSection(sectionId);
                            } else {
                                console.error('❌ Sezione non valida o app non definita');
                            }
                        }, 300);
                    });
                });
                
                // 4. Chiudi con ESC
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && isOpen) {
                        closeMenu();
                    }
                });
                
                // 5. Chiudi quando si ridimensiona a desktop
                window.addEventListener('resize', function() {
                    if (window.innerWidth > 768 && isOpen) {
                        closeMenu();
                    }
                });
                
                console.log('✅ Menu mobile configurato');
            }

            switchSection(sectionId) {
                console.log('🎯 SWITCH SECTION chiamato con:', sectionId);
                
                // 1. Nascondi tutte le sezioni
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // 2. Mostra la sezione richiesta
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.add('active');
                    
                    // 3. Scrolla in alto
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    
                    // 4. Aggiorna link attivo nella navigazione
                    this.updateActiveNavLink(sectionId);
                    
                    // 5. Carica contenuti specifici
                    setTimeout(() => {
                        switch(sectionId) {
                            case 'catalogo':
                                console.log('🛒 Carico catalogo');
                                this.filterProducts();
                                break;
                                
                            case 'favorites':
                                console.log('❤️ Carico preferiti');
                                this.displayFavorites();
                                break;
                                
                            case 'home':
                                console.log('🏠 Carico home');
                                // Ricarica recensioni se necessario
                                if (this.reviewsData) {
                                    this.updateReviewsDisplay();
                                }
                                break;
                                
                            default:
                                console.log('📄 Carico sezione:', sectionId);
                        }
                    }, 100);
                    
                    console.log('✅ Sezione attivata:', sectionId);
                } else {
                    console.error('❌ Sezione non trovata:', sectionId);
                }
            }

            updateActiveNavLink(sectionId) {
                console.log('🔘 Aggiorno link attivo per:', sectionId);
                
                // Rimuovi 'active' da tutti i link
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                // Trova e attiva il link corrispondente
                const selector = `.nav-link[data-section="${sectionId}"]`;
                const activeLink = document.querySelector(selector);
                
                if (activeLink) {
                    activeLink.classList.add('active');
                    console.log('✅ Link attivato:', selector);
                } else {
                    console.warn('⚠️ Link non trovato:', selector);
                }
            }

            // ============ PRODOTTI E CATALOGO ============
            loadProducts() {
                this.displayProducts('tutti');
            }


            setupFilters() {
                const searchInput = document.getElementById('search-input');
                if (searchInput) {
                    searchInput.addEventListener('input', () => this.filterProducts());
                }
                
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.filterProducts();
                    });
                });
            }

            filterProducts() {
                const searchTerm = document.getElementById('search-input').value.toLowerCase();
                const activeFilter = document.querySelector('.filter-btn.active').dataset.category;
                this.displayProducts(activeFilter, searchTerm);
            }

            // Aggiorna tutti i banner promozionali
            updatePromoBanners() {
                console.log('🎪 Aggiornamento banner promozionali...');
                
                const container = document.getElementById('promo-banners-container');
                const template = document.getElementById('promo-banner-template');
                
                if (!container) {
                    console.error('❌ Container banner non trovato!');
                    return;
                }
                
                if (!template) {
                    console.error('❌ Template banner non trovato!');
                    return;
                }
                
                // Ottieni promozioni attive
                const activePromotions = this.getActivePromotions();
                
                console.log('Promozioni attive trovate:', activePromotions.length);
                
                if (activePromotions.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">Nessuna offerta attiva al momento</p>';
                    console.log('Nessuna promozione attiva per mostrare banner');
                    return;
                }
                
                // Pulisci container
                container.innerHTML = '';
                
                // Crea un banner per ogni promozione attiva
                activePromotions.forEach(promo => {
                    console.log('Creando banner per:', promo.label);
                    
                    const banner = template.content.cloneNode(true);
                    const bannerElement = banner.querySelector('.promo-banner');
                    
                    // Imposta ID promozione
                    bannerElement.setAttribute('data-promo-id', promo.id);
                    
                    // Personalizza contenuto
                    bannerElement.querySelector('.promo-label').textContent = promo.label;
                    bannerElement.querySelector('.promo-title').textContent = 
                        `Sconto del ${promo.discount}%!`;
                    bannerElement.querySelector('.promo-description').textContent = 
                        `Su ${promo.products.length} prodotti • Valido fino al ${promo.endDate.toLocaleDateString('it-IT')}`;
                    
                    // Bottone per vedere prodotti
                    const promoBtn = bannerElement.querySelector('.promo-btn');
                    promoBtn.onclick = (e) => {
                        e.preventDefault();
                        this.switchSection('catalogo');
                    };
                    
                    // Bottone per chiudere
                    const closeBtn = bannerElement.querySelector('.promo-close');
                    closeBtn.onclick = (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        this.hidePromoBanner(promo.id);
                    };
                    
                    container.appendChild(banner);
                    
                    // Avvia countdown per questo banner
                    this.startPromoCountdown(promo.id, promo.endDate);
                    
                    console.log(`✅ Banner creato per: ${promo.label}`);
                });
                
                console.log(`Creati ${activePromotions.length} banner promozionali`);
            }

            // Avvia countdown per una specifica promozione
            startPromoCountdown(promoId, endDate) {
                console.log(`⏱️ Avvio countdown per ${promoId}`);
                
                const updateCountdown = () => {
                    const now = new Date();
                    const timeLeft = endDate - now;
                    
                    if (timeLeft <= 0) {
                        // Promozione scaduta
                        console.log(`⏰ Countdown scaduto per ${promoId}`);
                        if (this.promoCountdownIntervals && this.promoCountdownIntervals.has(promoId)) {
                            clearInterval(this.promoCountdownIntervals.get(promoId));
                            this.promoCountdownIntervals.delete(promoId);
                        }
                        this.removePromoBanner(promoId);
                        return;
                    }
                    
                    const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                    
                    // Aggiorna display
                    const banner = document.querySelector(`[data-promo-id="${promoId}"]`);
                    if (banner) {
                        const daysEl = banner.querySelector('[data-type="days"]');
                        const hoursEl = banner.querySelector('[data-type="hours"]');
                        const minutesEl = banner.querySelector('[data-type="minutes"]');
                        const secondsEl = banner.querySelector('[data-type="seconds"]');
                        
                        if (daysEl) daysEl.textContent = days.toString().padStart(2, '0');
                        if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
                        if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
                        if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');
                    }
                };
                
                // Aggiorna immediatamente
                updateCountdown();
                
                // Aggiorna ogni secondo
                const intervalId = setInterval(updateCountdown, 1000);
                
                // Salva l'interval ID per poterlo fermare
                if (!this.promoCountdownIntervals) {
                    this.promoCountdownIntervals = new Map();
                }
                this.promoCountdownIntervals.set(promoId, intervalId);
            }

            // Nascondi un banner specifico
            hidePromoBanner(promoId) {
                const banner = document.querySelector(`[data-promo-id="${promoId}"]`);
                if (banner) {
                    banner.style.opacity = '0';
                    banner.style.transform = 'translateY(-20px)';
                    
                    setTimeout(() => {
                        banner.style.display = 'none';
                        
                        // Salva in localStorage che questo banner è stato chiuso
                        const closedBanners = JSON.parse(localStorage.getItem('meco_closed_banners') || '[]');
                        if (!closedBanners.includes(promoId)) {
                            closedBanners.push(promoId);
                            localStorage.setItem('meco_closed_banners', JSON.stringify(closedBanners));
                        }
                        
                        // Ferma il countdown
                        this.stopPromoCountdown(promoId);
                        
                    }, 300);
                }
            }

            // Rimuovi banner (quando scade)
            removePromoBanner(promoId) {
                const banner = document.querySelector(`[data-promo-id="${promoId}"]`);
                if (banner) {
                    banner.remove();
                    this.stopPromoCountdown(promoId);
                }
            }

            // Ferma countdown
            stopPromoCountdown(promoId) {
                if (this.promoCountdownIntervals && this.promoCountdownIntervals.has(promoId)) {
                    clearInterval(this.promoCountdownIntervals.get(promoId));
                    this.promoCountdownIntervals.delete(promoId);
                }
            }

            // Controlla se un banner è stato chiuso manualmente
            isBannerClosed(promoId) {
                const closedBanners = JSON.parse(localStorage.getItem('meco_closed_banners') || '[]');
                return closedBanners.includes(promoId);
            }

            displayProducts(type = 'tutti', searchTerm = '') {
                const container = document.getElementById('products-container');
                container.innerHTML = '';

                let products = [];
                
                if (type === 'incisioni') {
                    products = productsData.incisioni;
                } else if (type === 'stampe3d') {
                    products = productsData.stampe3d;
                } else if (type === 'promozioni') {
                    // Solo prodotti in promozione
                    const allProducts = [...productsData.incisioni, ...productsData.stampe3d];
                    products = allProducts.filter(product => 
                        product.promotion && 
                        product.promotion.active && 
                        this.isPromotionValid(product.promotion)
                    );
                    
                    // Se non ci sono prodotti in offerta, mostra un messaggio
                    if (products.length === 0) {
                        container.innerHTML = `
                            <div style="grid-column: 1/-1; text-align: center; padding: 60px 20px;">
                                <i class="fas fa-gift" style="font-size: 48px; color: var(--accent-color); opacity: 0.5; margin-bottom: 20px;"></i>
                                <h3 style="color: var(--text-secondary); margin-bottom: 10px;">Nessuna offerta attiva al momento</h3>
                                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                                    Torna a controllare presto per nuove promozioni!
                                </p>
                                <button class="promo-btn glass-btn" data-section="catalogo"> 
                                        style="margin-top: 10px;">
                                    <span>Esplora tutti i prodotti</span>
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        `;
                        return;
                    }
                } else {
                    products = [...productsData.incisioni, ...productsData.stampe3d];
                }

                // Filtra per ricerca
                if (searchTerm) {
                    products = products.filter(p => 
                        p.name.toLowerCase().includes(searchTerm) ||
                        p.description.toLowerCase().includes(searchTerm)
                    );
                }

                // Crea le card
                products.forEach(product => {
                    const isFavorite = this.isFavorite(product.id);
                    const hasPromo = product.promotion && 
                                    product.promotion.active && 
                                    this.isPromotionValid(product.promotion);
                    
                    const card = document.createElement('div');
                    card.className = 'product-card glass-card';
                    card.innerHTML = `
                        <div class="product-image" style="position: relative;">
                            <img src="${product.image}" alt="${product.name}" 
                                loading="lazy" 
                                style="width: 100%; height: 100%; object-fit: cover;"
                                onerror="this.src='https://via.placeholder.com/400x300/1e2a4a/00c6ff?text=Product+Image'">
                            
                            ${product.promotion && product.promotion.active && this.isPromotionValid(product.promotion) ? `
                            <div class="product-promo-badge" 
                                style="position: absolute; top: 15px; left: 15px; z-index: 10;
                                        background: linear-gradient(135deg, #ff4757, #ff3742);
                                        color: white; padding: 6px 12px; border-radius: 20px;
                                        font-size: 11px; font-weight: 600; animation: pulse 2s infinite;">
                                <i class="fas fa-gift"></i> 
                                ${product.promotion.label || `${product.promotion.discount}% OFF`}
                            </div>
                            ` : ''}
                            
                            <button class="favorite-btn ${isFavorite ? 'active' : ''}" 
                                    onclick="app.toggleFavorite('${product.id}', event)"
                                    style="position: absolute; top: 15px; right: 15px; z-index: 10;">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                        <div class="product-info">
                            <span class="product-category">${product.category}</span>
                            <h3>${product.name}</h3>
                            <p class="product-description">${product.description}</p>
                            
                            <div class="product-price">
                                ${hasPromo ? `
                                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                                        <span style="text-decoration: line-through; color: var(--text-secondary);">
                                            €${product.basePrice.toFixed(2)}
                                        </span>
                                        <span style="color: #ff4757; font-size: 22px; font-weight: 700;">
                                            €${this.getDiscountedPrice(product).toFixed(2)}
                                        </span>
                                        <span style="color: #ff4757; font-size: 14px; font-weight: 600; background: rgba(255, 71, 87, 0.1); padding: 4px 8px; border-radius: 12px;">
                                            -${product.promotion.discount}%
                                        </span>
                                    </div>
                                ` : `
                                    <span style="font-size: 24px; font-weight: 700; color: var(--accent-color);">
                                        €${product.basePrice.toFixed(2)}
                                    </span>
                                `}
                            </div>
                            
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button class="glass-btn view-details" data-id="${product.id}">
                                    <span>Dettagli</span>
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                });

                // Aggiungi event listener per i bottoni dettagli
                container.querySelectorAll('.view-details').forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const productId = button.getAttribute('data-id');
                        console.log('Apertura modal per prodotto:', productId);
                        this.openProductModal(productId);
                    });
                });

                // Se nessun prodotto
                if (products.length === 0) {
                    container.innerHTML = `
                        <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
                            <h3 style="color: var(--text-secondary); margin-bottom: 10px;">
                                <i class="fas fa-search"></i>
                            </h3>
                            <p style="color: var(--text-secondary);">Nessun prodotto trovato</p>
                        </div>
                    `;
                }
            }

            closeModal() {
                const modal = document.getElementById('product-modal');
                if (modal) {
                    modal.classList.remove('active');
                    
                    setTimeout(() => {
                        modal.style.display = 'none';
                        document.getElementById('modal-content').innerHTML = '';
                        
                        // Reset
                        this.currentProduct = null;
                        this.currentTotal = 0;
                        
                        // Ripristina scroll body
                        document.body.style.overflow = '';
                    }, 300);
                }
            }

            updatePromoBannerVisibility() {
                const promoBanner = document.getElementById('promo-banner');
                const reopenBtn = document.getElementById('reopen-promo-btn');
                
                if (!promoBanner) return;
                
                // Controlla se ci sono prodotti in promozione validi
                const hasActivePromotions = this.hasActivePromotions();
                
                if (!hasActivePromotions) {
                    // Nascondi completamente il banner promozionale
                    promoBanner.style.display = 'none';
                    if (reopenBtn) {
                        reopenBtn.style.display = 'none';
                    }
                    // Rimuovi dalla memoria che è stato chiuso
                    localStorage.removeItem('meco_promo_closed_date');
                } else {
                    // Mostra normalmente (verrà gestito da checkPromoBanner())
                    this.checkPromoBanner();
                }
            }

            hasActivePromotions() {
                const allProducts = [...productsData.incisioni, ...productsData.stampe3d];
                
                // Cerca almeno un prodotto con promozione attiva e valida
                for (const product of allProducts) {
                    if (product.promotion && 
                        product.promotion.active && 
                        this.isPromotionValid(product.promotion)) {
                        console.log('Trovata promozione attiva:', product.name);
                        return true;
                    }
                }
                
                console.log('Nessuna promozione attiva trovata');
                return false;
            }

            openProductModalById(productId) {
                console.log('openProductModalById chiamato con ID:', productId);
                this.openProductModal(productId);
            }

            openProductModal(productId) {
                console.log('=== DEBUG openProductModal ===');
                console.log('Product ID:', productId);
                console.log('Products data exists:', !!productsData);
                
                try {
                    // Trova il prodotto
                    let product = null;
                    for (const category in productsData) {
                        console.log('Searching in category:', category);
                        const found = productsData[category].find(p => {
                            console.log('Checking product:', p.id, p.name);
                            return p.id === productId;
                        });
                        if (found) {
                            product = found;
                            console.log('Found product:', product);
                            break;
                        }
                    }

                    if (!product) {
                        console.error('Prodotto non trovato con ID:', productId);
                        alert('Prodotto non trovato!');
                        return;
                    }
                    
                    // DEBUG: Ora product è definito
                    console.log('Dati prodotto:', {
                        name: product.name,
                        hasGallery: !!product.gallery,
                        galleryLength: product.gallery ? product.gallery.length : 0,
                        hasCustomizations: !!product.customizations,
                        customizationsKeys: product.customizations ? Object.keys(product.customizations) : []
                    });
                    
                    // Salva riferimento al prodotto
                    this.currentProduct = product;
                    this.currentTotal = product.basePrice;

                    // Crea contenuto modal
                    const modalContent = `
                        <div style="max-width: 600px; margin: 0 auto;">
                            <!-- Immagine principale -->
                            <div id="main-image-container" style="margin-bottom: 20px; position: relative;">
                                <img id="main-product-image" src="${product.image}" alt="${product.name}" 
                                    style="width: 100%; height: 400px; object-fit: cover; border-radius: 15px; cursor: pointer;
                                            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);">
                                <div style="position: absolute; bottom: 15px; right: 15px; background: rgba(0, 0, 0, 0.7); 
                                            color: white; padding: 8px 12px; border-radius: 20px; font-size: 12px;
                                            backdrop-filter: blur(5px); display: flex; align-items: center; gap: 5px;">
                                    <i class="fas fa-search-plus"></i> Clicca l'immagine per zoom
                                </div>
                            </div>
                            
                            <!-- Galleria thumbnails -->
                            <div style="margin-bottom: 30px;">
                                <h4 style="margin-bottom: 10px; color: var(--text-color); font-size: 16px;">
                                    <i class="fas fa-images" style="margin-right: 8px;"></i>
                                    Immagini prodotto
                                </h4>
                                <div id="gallery-thumbs" style="display: flex; gap: 10px; overflow-x: auto; padding: 10px 0;">
                                    ${this.getGalleryHTML(product.gallery || [product.image])}
                                </div>
                            </div>
                            
                            <!-- Nome prodotto -->
                            <h2 style="margin-bottom: 10px; color: var(--accent-color);">
                                ${product.name}
                            </h2>
                            
                            <!-- Categoria -->
                            <div style="margin-bottom: 20px;">
                                <span class="product-category" style="display: inline-block; padding: 5px 12px; 
                                    background: rgba(0, 198, 255, 0.1); color: var(--accent-color); 
                                    border-radius: 20px; font-size: 12px;">
                                    ${(() => {
                                        const labels = {
                                            'bambini': 'Bambini',
                                            'arredamento': 'Arredamento',
                                            'decorazioni': 'Decorazioni',
                                            'pasqua': 'Pasqua',
                                            'gadget': 'Gadget',
                                            'giochi': 'Giochi'
                                        };
                                        return labels[product.category] || product.category;
                                    })()}
                                </span>
                            </div>
                            
                            <!-- Descrizione -->
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; margin-bottom: 25px;">
                                <h3 style="margin-bottom: 15px; color: var(--text-color);">
                                    <i class="fas fa-info-circle" style="margin-right: 8px;"></i>Descrizione
                                </h3>
                                <p style="color: var(--text-secondary); line-height: 1.6;">
                                    ${product.descrizioneApprofondita}
                                </p>
                            </div>
                            
                            <!-- Personalizzazioni -->
                            ${(product.customizations && Object.keys(product.customizations).length > 0) ? `
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; margin-bottom: 25px;">
                                <h3 style="margin-bottom: 15px; color: var(--text-color);">
                                    <i class="fas fa-sliders-h" style="margin-right: 8px;"></i>Personalizzazioni
                                </h3>
                                <div id="customizations-container">
                                    ${this.getCustomizationsHTML(product.customizations)}
                                </div>
                            </div>
                            ` : '<div style="margin-bottom: 25px; color: var(--text-secondary); font-style: italic;">Nessuna personalizzazione disponibile per questo prodotto.</div>'}
                            
                            <!-- Prezzi -->
                            <div style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                                ${product.promotion && product.promotion.active && this.isPromotionValid(product.promotion) ? `
                                <div style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid var(--glass-border);">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                        <span style="color: var(--text-color); font-size: 16px;">
                                            <i class="fas fa-tag" style="margin-right: 8px;"></i>Prezzo originale
                                        </span>
                                        <span style="color: var(--text-secondary); text-decoration: line-through; font-size: 18px;">
                                            €${product.basePrice.toFixed(2)}
                                        </span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                        <span style="color: var(--text-color); font-size: 16px;">
                                            <i class="fas fa-percentage" style="margin-right: 8px;"></i>Sconto applicato
                                        </span>
                                        <span style="color: #ff4757; font-size: 18px; font-weight: 600;">
                                            ${product.promotion.discount}% OFF
                                        </span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <span style="color: var(--text-color); font-size: 18px; font-weight: 500;">
                                            <i class="fas fa-bolt" style="margin-right: 8px;"></i>Prezzo promozionale
                                        </span>
                                        <span style="color: #ff4757; font-size: 24px; font-weight: 700;">
                                            €${this.calculateDiscountedPrice(product.basePrice, product.promotion?.discount).toFixed(2)}
                                        </span>
                                    </div>
                                </div>
                                ` : `
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                    <span style="color: var(--text-color); font-size: 18px;">
                                        <i class="fas fa-tag" style="margin-right: 8px;"></i>Prezzo base
                                    </span>
                                    <span style="color: var(--accent-color); font-size: 24px; font-weight: 700;">
                                        €${product.basePrice.toFixed(2)}
                                    </span>
                                </div>
                                `}
                                
                                ${product.customizations ? `
                                <div style="display: flex; justify-content: space-between; align-items: center; 
                                            padding-top: 20px; border-top: 1px solid var(--glass-border);">
                                    <span style="font-size: 20px; color: var(--text-color); font-weight: 600;">
                                        <i class="fas fa-calculator" style="margin-right: 8px;"></i>Totale
                                    </span>
                                    <span id="modal-total-price" style="font-size: 32px; font-weight: bold; color: var(--accent-color);">
                                        €${this.getDiscountedPrice(product).toFixed(2)}
                                    </span>
                                </div>
                                ` : ''}
                            </div>
                            
                            <!-- Bottoni azione -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 25px;">
                                <button class="glass-btn contact-modal-btn" style="width: 100%;">
                                    <span>Contattaci su WhastApp</span>
                                    <i class="fas fa-envelope"></i>
                                </button>
                            </div>
                            
                            <!-- Info aggiuntive -->
                            <div style="margin-top: 25px; padding: 15px; background: rgba(0, 198, 255, 0.05); 
                                        border-radius: 10px; border-left: 4px solid var(--accent-color);">
                                <p style="color: var(--text-secondary); font-size: 14px; margin: 0;">
                                    <i class="fas fa-info-circle" style="margin-right: 8px; color: var(--accent-color);"></i>
                                    Per ordinare o richiedere informazioni, contattaci via email o telefono.
                                </p>
                            </div>
                        </div>
                    `;

                    document.getElementById('modal-content').innerHTML = modalContent;
                    const modal = document.getElementById('product-modal');
                    
                    console.log('Modal prima di mostrarlo:', {
                        display: modal.style.display,
                        classList: modal.classList.toString(),
                        exists: !!modal
                    });
                    
                    modal.style.display = 'flex'; // Assicurati che sia flex
                    setTimeout(() => {
                        modal.classList.add('active');
                        console.log('Modal dopo show:', {
                            display: modal.style.display,
                            classList: modal.classList.toString()
                        });
                    }, 10);
                    
                    // Aggiungi event listeners alle opzioni
                    setTimeout(() => this.setupCustomizationOptions(), 100);
                    this.checkModalRendering();
                
                } catch (error) {
                    console.error('Errore in openProductModal:', error);
                    alert('Errore nell\'apertura del prodotto: ' + error.message);
                }
            }

            checkModalRendering() {
                setTimeout(() => {
                    const modal = document.getElementById('product-modal');
                    const content = document.getElementById('modal-content');
                    
                    console.log('Check rendering modal:', {
                        modalVisible: window.getComputedStyle(modal).display,
                        modalOpacity: window.getComputedStyle(modal).opacity,
                        contentExists: !!content,
                        contentHTML: content ? content.innerHTML.length : 0,
                        scrollDisabled: document.body.style.overflow === 'hidden'
                    });
                    
                    // Controlla se l'immagine principale esiste
                    const mainImg = document.getElementById('main-product-image');
                    if (mainImg) {
                        console.log('Main image loaded:', mainImg.complete);
                        mainImg.onerror = () => console.error('Image failed to load');
                    }
                }, 200);
            }

            calculateDiscountedPrice(basePrice, discountPercent) {
                if (!discountPercent || discountPercent <= 0) return basePrice;
                const discountAmount = basePrice * (discountPercent / 100);
                const discounted = basePrice - discountAmount;
                return Math.round(discounted * 100) / 100; // Arrotonda a 2 decimali
            }

            updatePromoPrices() {
                // Aggiorna automaticamente i promoPrice basati sullo sconto percentuale
                const allProducts = [...productsData.incisioni, ...productsData.stampe3d];
                
                allProducts.forEach(product => {
                    if (product.promotion && 
                        product.promotion.active && 
                        product.promotion.discount && 
                        product.promotion.discount > 0 &&
                        (!product.promotion.promoPrice || product.promotion.promoPrice === 0)) {
                        
                        // Calcola e salva il promoPrice
                        product.promotion.promoPrice = this.getDiscountedPrice(product);
                    }
                });
                
                console.log('Prezzi promozionali aggiornati automaticamente');
            }

            setupCustomizationOptions() {
                const modalContent = document.getElementById('modal-content');
                if (!modalContent) return;
                
                // Usa event delegation per gestire i click sulle opzioni
                modalContent.addEventListener('click', (e) => {
                    const optionBtn = e.target.closest('[data-customization]');
                    const galleryThumb = e.target.closest('.gallery-thumb');
                    const mainImage = e.target.closest('#main-product-image');
                    
                    // Gestione click sulle opzioni
                    if (optionBtn) {
                        e.preventDefault();
                        
                        const groupKey = optionBtn.dataset.customization;
                        
                        // Rimuovi 'selected' da tutte le opzioni dello stesso gruppo
                        const allOptionsInGroup = modalContent.querySelectorAll(`[data-customization="${groupKey}"]`);
                        allOptionsInGroup.forEach(btn => {
                            btn.classList.remove('selected');
                            btn.style.background = 'rgba(255,255,255,0.05)';
                            btn.style.borderColor = 'var(--glass-border)';
                            btn.style.color = 'var(--text-secondary)';
                        });
                        
                        // Aggiungi 'selected' all'opzione cliccata
                        optionBtn.classList.add('selected');
                        optionBtn.style.background = 'var(--accent-color)';
                        optionBtn.style.borderColor = 'var(--accent-color)';
                        optionBtn.style.color = 'white';
                        
                        // Aggiorna il prezzo totale
                        this.updateTotalPrice();
                    }
                    
                    // Gestione click sulle thumbnails della galleria
                    if (galleryThumb) {
                        e.preventDefault();
                        const imageUrl = galleryThumb.dataset.image;
                        
                        // Aggiorna l'immagine principale
                        const mainImg = document.getElementById('main-product-image');
                        if (mainImg) {
                            mainImg.src = imageUrl;
                        }
                        
                        // Aggiorna lo stato attivo delle thumbnails
                        const allThumbs = modalContent.querySelectorAll('.gallery-thumb');
                        allThumbs.forEach(thumb => {
                            thumb.style.borderColor = 'transparent';
                            thumb.classList.remove('active');
                        });
                        
                        galleryThumb.style.borderColor = 'var(--accent-color)';
                        galleryThumb.classList.add('active');
                    }
                    
                    // Gestione click sull'immagine principale (zoom)
                    if (mainImage) {
                        this.toggleImageZoom(mainImage.src);
                    }
                });
                
                // Gestisci input di testo
                modalContent.addEventListener('input', (e) => {
                    if (e.target.id && e.target.id.startsWith('custom-text-')) {
                        this.updateTotalPrice();
                    }
                });
                
                // Gestisci click sul bottone "Richiedi Preventivo"
                const contactBtn = modalContent.querySelector('.glass-btn');
                if (contactBtn) {
                    contactBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.closeModal();
                        setTimeout(() => this.switchSection('contatti'), 300);
                    });
                }
            }

            updateTotalPrice() {
                if (!this.currentProduct) return;
                
                // Usa il prezzo scontato se c'è promozione
                const basePrice = this.getDiscountedPrice(this.currentProduct);
                
                // Inizia con il prezzo base (già scontato se necessario)
                let total = basePrice;
                
                // Somma i prezzi di tutte le opzioni selezionate
                const selectedOptions = document.querySelectorAll('.customization-option.selected');
                selectedOptions.forEach(option => {
                    const price = parseFloat(option.dataset.price) || 0;
                    total += price;
                });
                
                this.currentTotal = total;
                
                // Aggiorna il display
                const totalElement = document.getElementById('modal-total-price');
                if (totalElement) {
                    totalElement.textContent = `€${total.toFixed(2)}`;
                }
            }

            formatPrice(price) {
                return parseFloat(price).toFixed(2);
            }

            toggleImageZoom(imageUrl) {
                // Crea o rimuovi il modal per lo zoom
                let zoomModal = document.getElementById('image-zoom-modal');
                
                if (zoomModal) {
                    // Se esiste già, rimuovilo
                    zoomModal.remove();
                    document.body.style.overflow = '';
                } else {
                    document.body.style.overflow = 'hidden';
        
                    zoomModal = document.createElement('div');
                    zoomModal.id = 'image-zoom-modal';
                    zoomModal.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0, 0, 0, 0.98);
                        z-index: 9999;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    `;
                    
                    zoomModal.innerHTML = `
                        <div style="position: relative;">
                            <!-- BOTTONE SOPRA TUTTO -->
                            <button onclick="document.getElementById('image-zoom-modal').remove(); document.body.style.overflow = ''"
                                    style="position: fixed; top: 20px; right: 20px; 
                                        background: #ff4757; border: none;
                                        width: 50px; height: 50px; border-radius: 50%;
                                        color: white; font-size: 24px; cursor: pointer;
                                        z-index: 10000;">
                                ✕
                            </button>
                            <img src="${imageUrl}" alt="Zoom" 
                                style="max-width: 90vw; max-height: 90vh; border-radius: 10px;">
                        </div>
                    `;
                    
                    document.body.appendChild(zoomModal);
                    
                    // Animazione fade in
                    setTimeout(() => {
                        zoomModal.style.opacity = '1';
                    }, 10);
                    
                    // Chiudi al click sul backdrop o sul bottone
                    zoomModal.addEventListener('click', (e) => {
                        if (e.target === zoomModal || e.target.closest('#zoom-close-btn')) {
                            zoomModal.style.opacity = '0';
                            setTimeout(() => {
                                zoomModal.remove();
                                document.body.style.overflow = '';
                            }, 300);
                        }
                    });
                    
                    // Chiudi con ESC
                    const closeOnEsc = (e) => {
                        if (e.key === 'Escape') {
                            zoomModal.style.opacity = '0';
                            setTimeout(() => {
                                zoomModal.remove();
                                document.body.style.overflow = '';
                                document.removeEventListener('keydown', closeOnEsc);
                            }, 300);
                        }
                    };
                    document.addEventListener('keydown', closeOnEsc);
                    
                    // Previeni lo scroll dentro il modal
                    zoomModal.addEventListener('wheel', (e) => {
                        e.preventDefault();
                    }, { passive: false });
                }
            }

            // ============ SISTEMA RECENSIONI ===========

            // Inizializza sistema recensioni
            initReviews() {
                console.log('Inizializzazione sistema recensioni...');
                
                // Carica recensioni
                this.loadReviews();
                
                // Setup carousel
                this.setupReviewsCarousel();
                
                // Setup modal recensioni
                this.setupReviewModal();
                
                // Popola dropdown prodotti
                this.populateProductDropdown();
            }

            // Carica recensioni nel carousel
            loadReviews() {
                const container = document.getElementById('reviews-carousel');
                if (!container) return;
                
                container.innerHTML = '';
                
                if (this.reviewsData.length === 0) {
                    container.innerHTML = `
                        <div style="flex: 0 0 350px; text-align: center; padding: 40px; color: var(--text-secondary);">
                            <i class="fas fa-comments" style="font-size: 48px; margin-bottom: 20px;"></i>
                            <h3>Nessuna recensione ancora</h3>
                            <p>Sii il primo a lasciare una recensione!</p>
                            <button class="glass-btn" id="be-first-review-btn" 
                                    style="margin-top: 20px; padding: 10px 20px;">
                                Lascia una recensione
                            </button>
                        </div>
                    `;
                    
                    setTimeout(() => {
                        const beFirstBtn = document.getElementById('be-first-review-btn');
                        if (beFirstBtn) {
                            beFirstBtn.addEventListener('click', () => this.openReviewModal());
                        }
                    }, 100);
                    
                    return;
                }
                
                this.reviewsData.forEach((review, index) => {
                    const card = document.createElement('div');
                    card.className = 'review-card';
                    card.dataset.reviewId = review.id;
                    
                    // Stelle
                    let starsHTML = '';
                    for (let i = 1; i <= 5; i++) {
                        starsHTML += i <= review.rating 
                            ? '<i class="fas fa-star"></i>' 
                            : '<i class="far fa-star"></i>';
                    }
                    
                    // Badge verificato
                    const verifiedBadge = review.verified ? 
                        '<span class="verified-badge"><i class="fas fa-check-circle"></i> Verificata</span>' : 
                        '';
                    
                    card.innerHTML = `
                        <!-- Pulsante elimina (solo per recensioni non verificate o tutte se vuoi) -->
                        ${!review.verified ? `
                        <button class="delete-review-btn" 
                                data-review-id="${review.id}"
                                style="position: absolute; top: 15px; right: 15px; 
                                    background: rgba(255, 71, 87, 0.1); 
                                    border: 1px solid #ff4757;
                                    color: #ff4757;
                                    width: 30px; height: 30px;
                                    border-radius: 50%;
                                    display: flex; align-items: center; justify-content: center;
                                    cursor: pointer; font-size: 12px;
                                    transition: all 0.3s ease; z-index: 5;">
                            <i class="fas fa-times"></i>
                        </button>
                        ` : ''}
                        
                        <div class="review-stars">${starsHTML}</div>
                        <p class="review-text">"${review.text}"</p>
                        
                        ${review.product ? `
                        <div style="margin-bottom: 15px;">
                            <small style="color: var(--accent-color);">
                                <i class="fas fa-tag"></i> ${review.product}
                            </small>
                        </div>
                        ` : ''}
                        
                        <div class="review-client">
                            <div class="client-avatar">${review.name.charAt(0)}</div>
                            <div class="client-info">
                                <h4>${review.name} ${verifiedBadge}</h4>
                                <p>${review.date}</p>
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(card);
                });
                
                // Aggiungi event listener per i pulsanti di eliminazione
                this.setupDeleteReviewButtons();
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 15px 20px;
                    background: ${type === 'success' ? 'rgba(76, 175, 80, 0.9)' : 'rgba(255, 71, 87, 0.9)'};
                    color: white;
                    border-radius: 10px;
                    backdrop-filter: blur(10px);
                    z-index: 9999;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    animation: slideIn 0.3s ease;
                `;
                
                notification.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                `;
                
                document.body.appendChild(notification);
                
                // Rimuovi dopo 3 secondi
                setTimeout(() => {
                    notification.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                }, 3000);
            }

            deleteReview(reviewId) {
                console.log('🗑️ Eliminazione recensione:', reviewId);
                
                // Trova l'indice della recensione
                const index = this.reviewsData.findIndex(review => review.id === reviewId);
                
                if (index !== -1) {
                    // Rimuovi la recensione
                    this.reviewsData.splice(index, 1);
                    
                    // Salva nel localStorage
                    localStorage.setItem('meco_reviews', JSON.stringify(this.reviewsData));
                    
                    // Ricalcola e aggiorna tutto
                    this.loadReviews();
                    this.setupReviewsCarousel();
                    this.updateReviewsDisplay();
                    
                    console.log('✅ Recensione eliminata');
                    
                    // Mostra notifica
                    this.showNotification('Recensione eliminata con successo', 'success');
                }
            }

            // Setup carousel navigazione
            setupReviewsCarousel() {
                const prevBtn = document.getElementById('reviews-prev');
                const nextBtn = document.getElementById('reviews-next');
                const carousel = document.getElementById('reviews-carousel');
                
                if (!prevBtn || !nextBtn || !carousel) return;
                
                prevBtn.addEventListener('click', () => {
                    carousel.scrollBy({ left: -350, behavior: 'smooth' });
                });
                
                nextBtn.addEventListener('click', () => {
                    carousel.scrollBy({ left: 350, behavior: 'smooth' });
                });
            }

            setupDeleteReviewButtons() {
                document.querySelectorAll('.delete-review-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const reviewId = parseInt(btn.getAttribute('data-review-id'));
                        
                        if (confirm('Sei sicuro di voler eliminare questa recensione?')) {
                            this.deleteReview(reviewId);
                        }
                    });
                });
            }

            // Scroll recensioni
            scrollReviews(direction) {
                const carousel = document.getElementById('reviews-carousel');
                const cardWidth = 350;
                const cardsPerView = Math.floor(carousel.parentElement.offsetWidth / cardWidth);
                const maxScroll = carousel.scrollWidth - carousel.clientWidth;
                
                let newScroll = carousel.scrollLeft + (direction * cardWidth * cardsPerView);
                
                // Boundary check
                if (newScroll < 0) newScroll = maxScroll;
                if (newScroll > maxScroll) newScroll = 0;
                
                carousel.scrollTo({
                    left: newScroll,
                    behavior: 'smooth'
                });
                
                // Aggiorna dots
                this.updateReviewDots(Math.floor(newScroll / (cardWidth * cardsPerView)));
            }

            // Scroll a specifica posizione
            scrollToReview(index) {
                const carousel = document.getElementById('reviews-carousel');
                const cardWidth = 350;
                const cardsPerView = Math.floor(carousel.parentElement.offsetWidth / cardWidth);
                
                carousel.scrollTo({
                    left: index * cardWidth * cardsPerView,
                    behavior: 'smooth'
                });
                
                this.updateReviewDots(index);
            }

            // Aggiorna dots
            updateReviewDots(activeIndex) {
                const dots = document.querySelectorAll('.carousel-dot');
                dots.forEach((dot, index) => {
                    if (index === activeIndex) {
                        dot.classList.add('active');
                    } else {
                        dot.classList.remove('active');
                    }
                });
            }

            setupRatingStars() {
                const container = document.querySelector('#review-modal .rating-stars');
                if (!container) {
                    console.error('❌ Container stelle non trovato');
                    return;
                }
                
                // Pulisci
                container.innerHTML = '';
                
                // Crea 5 stelle
                for (let i = 1; i <= 5; i++) {
                    const star = document.createElement('i');
                    star.className = 'far fa-star';
                    star.dataset.rating = i;
                    star.style.cssText = 'font-size: 28px; cursor: pointer; color: #FFC107; margin: 0 5px;';
                    
                    star.addEventListener('mouseover', () => this.hoverRating(i));
                    star.addEventListener('mouseout', () => this.resetHoverRating());
                    star.addEventListener('click', () => this.clickRating(i));
                    
                    container.appendChild(star);
                }
                
                this.resetRatingStars();
            }

            hoverRating(rating) {
                const stars = document.querySelectorAll('#review-modal .rating-stars i');
                stars.forEach(star => {
                    const starRating = parseInt(star.dataset.rating);
                    if (starRating <= rating) {
                        star.classList.add('fas');
                        star.classList.remove('far');
                    }
                });
            }

            resetHoverRating() {
                const stars = document.querySelectorAll('#review-modal .rating-stars i');
                const currentRating = document.getElementById('review-rating')?.value || 0;
                
                stars.forEach(star => {
                    const starRating = parseInt(star.dataset.rating);
                    if (starRating <= currentRating) {
                        star.classList.add('fas');
                        star.classList.remove('far');
                    } else {
                        star.classList.add('far');
                        star.classList.remove('fas');
                    }
                });
            }

            clickRating(rating) {
                console.log('⭐ Stella cliccata:', rating);
                
                const stars = document.querySelectorAll('#review-modal .rating-stars i');
                const ratingInput = document.getElementById('review-rating');
                
                if (ratingInput) {
                    ratingInput.value = rating;
                }
                
                stars.forEach(star => {
                    const starRating = parseInt(star.dataset.rating);
                    if (starRating <= rating) {
                        star.classList.add('fas', 'active');
                        star.classList.remove('far');
                    } else {
                        star.classList.add('far');
                        star.classList.remove('fas', 'active');
                    }
                });
            }

            // Setup modal recensioni
            setupReviewModal() {
                console.log('🔧 Setup modal recensioni');
                
                const modal = document.getElementById('review-modal');
                const closeBtn = document.getElementById('review-modal-close');
                const form = document.getElementById('review-form');
                
                if (!modal) {
                    console.error('❌ Modal non trovato!');
                    return;
                }
                
                // Chiusura con X
                if (closeBtn) {
                    closeBtn.addEventListener('click', () => this.closeReviewModal());
                }
                
                // Chiusura cliccando fuori
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) this.closeReviewModal();
                });
                
                // Setup stelle
                this.setupRatingStars();
                
                // Setup form
                if (form) {
                    form.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.submitReview();
                    });
                }
                
                // Popola dropdown prodotti
                this.populateProductDropdown();
            }

            // Imposta rating
            setRating(rating) {
                const stars = document.querySelectorAll('.rating-stars i');
                const ratingInput = document.getElementById('review-rating');
                
                ratingInput.value = rating;
                
                stars.forEach(star => {
                    const starRating = parseInt(star.dataset.rating);
                    if (starRating <= rating) {
                        star.classList.remove('far');
                        star.classList.add('fas', 'active');
                    } else {
                        star.classList.remove('fas', 'active');
                        star.classList.add('far');
                    }
                });
            }

            // Anteprima rating
            previewRating(rating) {
                const stars = document.querySelectorAll('.rating-stars i');
                
                stars.forEach(star => {
                    const starRating = parseInt(star.dataset.rating);
                    if (starRating <= rating) {
                        star.classList.remove('far');
                        star.classList.add('fas');
                    } else {
                        star.classList.remove('fas');
                        star.classList.add('far');
                    }
                });
            }

            // Popola dropdown prodotti
            populateProductDropdown() {
                const select = document.getElementById('review-product');
                if (!select) return;
                
                // Pulisci opzioni esistenti (tranne la prima)
                while (select.options.length > 1) {
                    select.remove(1);
                }
                
                // Aggiungi prodotti
                const allProducts = [...productsData.incisioni, ...productsData.stampe3d];
                allProducts.forEach(product => {
                    const option = document.createElement('option');
                    option.value = product.id;
                    option.textContent = product.name;
                    select.appendChild(option);
                });
            }

            // Invia recensione
            submitReview() {
                console.log('📤 Invio recensione');
                
                const rating = parseInt(document.getElementById('review-rating').value) || 0;
                const name = document.getElementById('review-name')?.value.trim() || 'Cliente MECO';
                const text = document.getElementById('review-text')?.value.trim() || '';
                const productId = document.getElementById('review-product')?.value || '';
                
                // Validazione
                if (rating === 0) {
                    alert('Per favore, seleziona una valutazione con le stelle');
                    return;
                }
                
                if (!text) {
                    alert('Per favore, scrivi la tua recensione');
                    return;
                }
                
                // Trova nome prodotto
                let productName = '';
                if (productId) {
                    const allProducts = [...productsData.incisioni, ...productsData.stampe3d];
                    const product = allProducts.find(p => p.id === productId);
                    productName = product ? product.name : '';
                }
                
                // Crea recensione
                const newReview = {
                    id: Date.now(),
                    name: name,
                    rating: rating,
                    text: text,
                    product: productName,
                    date: 'Oggi', // O usa: new Date().toLocaleDateString('it-IT')
                    verified: false,
                    timestamp: Date.now()
                };
                
                // Salva
                this.reviewsData.unshift(newReview);
                localStorage.setItem('meco_reviews', JSON.stringify(this.reviewsData));
                
                // AGGIORNA LE STATISTICHE
                this.updateReviewsDisplay();
                
                // Conferma
                alert('✅ Recensione inviata! Grazie per il feedback.');
                
                // Chiudi e ricarica
                this.closeReviewModal();
                setTimeout(() => {
                    this.loadReviews();
                    this.setupReviewsCarousel();
                    this.updateReviewsDisplay(); // Ancora una volta per sicurezza
                }, 500);
            }

            // Aggiorna contatore recensioni
            updateReviewCounter() {
                const totalReviews = this.reviewsData.length;
                const avgRating = this.reviewsData.reduce((sum, review) => sum + review.rating, 0) / totalReviews;
                
                // Puoi aggiornare elementi UI con questi dati
                console.log(`Recensioni totali: ${totalReviews}, Valutazione media: ${avgRating.toFixed(1)}`);
            }

            // Salva recensione su server (esempio)
            saveReviewToServer(review) {
                // ESEMPIO: chiamata API
                /*
                fetch('/api/reviews', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(review)
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Recensione salvata:', data);
                })
                .catch(error => {
                    console.error('Errore:', error);
                });
                */
            }

            getCustomizationsHTML(customizations) {
                if (!customizations || typeof customizations !== 'object' || Object.keys(customizations).length === 0) {
                        return '<p style="color: var(--text-secondary); text-align: center; padding: 20px;">Nessuna opzione di personalizzazione disponibile</p>';
                    }
                            
                let html = '';
                for (const key in customizations) {
                    const custom = customizations[key];
                    
                    html += `
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; color: var(--text-color); font-weight: 500;">
                                ${custom.label}
                            </label>
                    `;
                    
                    if (custom.type === 'text') {
                        // Input di testo
                        html += `
                            <input type="text" 
                                id="custom-text-${key}"
                                style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); 
                                        border: 1px solid var(--glass-border); border-radius: 10px;
                                        color: var(--text-color);"
                                maxlength="${custom.maxLength || 50}"
                                placeholder="Scrivi qui...">
                        `;
                    } else if (custom.options) {
                        // Opzioni selezionabili
                        html += `
                            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                ${custom.options.map((option, index) => `
                                    <button data-customization="${key}"
                                            data-price="${option.price}"
                                            class="customization-option ${index === 0 ? 'selected' : ''}"
                                            style="padding: 10px 18px; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;">
                                        ${option.name} ${option.price > 0 ? `(+€${option.price.toFixed(2)})` : ''}
                                    </button>
                                `).join('')}
                            </div>
                        `;
                    }
                    
                    html += `</div>`;
                }
                return html;
            }

            getGalleryHTML(gallery) {
                console.log('getGalleryHTML chiamata con:', gallery);
                console.log('currentProduct:', this.currentProduct);
                // Se gallery non esiste o è vuota, usa l'immagine principale
                if (!gallery || !Array.isArray(gallery) || gallery.length === 0) {
                    if (this.currentProduct && this.currentProduct.image) {
                        return `
                            <div class="gallery-thumb active" 
                                data-image="${this.currentProduct.image}"
                                style="min-width: 80px; height: 80px; border-radius: 8px; overflow: hidden; 
                                        cursor: pointer; border: 2px solid var(--accent-color);
                                        transition: all 0.3s ease;">
                                <img src="${this.currentProduct.image}" alt="Product image" 
                                    style="width: 100%; height: 100%; object-fit: cover;"
                                    onerror="this.src='https://via.placeholder.com/80/1e2a4a/00c6ff?text=Image'">
                            </div>
                        `;
                    }
                    return '';
            }
            
            return gallery.map((img, index) => `
                <div class="gallery-thumb ${index === 0 ? 'active' : ''}" 
                    data-image="${img}"
                    style="min-width: 80px; height: 80px; border-radius: 8px; overflow: hidden; 
                            cursor: pointer; border: 2px solid ${index === 0 ? 'var(--accent-color)' : 'transparent'};
                            transition: all 0.3s ease;">
                    <img src="${img}" alt="Gallery image ${index + 1}" 
                        style="width: 100%; height: 100%; object-fit: cover;"
                        onerror="this.src='https://via.placeholder.com/80/1e2a4a/00c6ff?text=Image'">
                </div>
            `).join('');
            }

            shareOnWhatsApp() {
                if (!this.currentProduct) return;
                
                // Costruisci il messaggio
                let message = `Ciao MECO! Sono interessato al prodotto:\n`;
                message += `📦 *${this.currentProduct.name}*\n`;
                message += `💰 Prezzo base: €${this.currentProduct.basePrice.toFixed(2)}\n`;
                
                // Aggiungi personalizzazioni selezionate
                const selectedOptions = document.querySelectorAll('.customization-option.selected');
                if (selectedOptions.length > 0) {
                    message += `\n🎨 Personalizzazioni scelte:\n`;
                    selectedOptions.forEach(option => {
                        const price = parseFloat(option.dataset.price) || 0;
                        message += `• ${option.textContent.trim()}\n`;
                    });
                }
                
                // Aggiungi input di testo se presenti
                const textInputs = document.querySelectorAll('input[id^="custom-text-"]');
                textInputs.forEach(input => {
                    if (input.value.trim()) {
                        message += `• ${input.placeholder || 'Testo personalizzato'}: ${input.value}\n`;
                    }
                });
                
                // Aggiungi prezzo totale se disponibile
                if (this.currentTotal > this.currentProduct.basePrice) {
                    message += `\n💵 Totale: €${this.currentTotal.toFixed(2)}`;
                }
                
                message += `\n\nVorrei maggiori informazioni su questo prodotto!`;
                
                // Codifica il messaggio per URL
                const encodedMessage = encodeURIComponent(message);
                
                // Crea il link WhatsApp
                const phoneNumber = '3806458336'; // Il tuo numero senza +
                const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
                
                // Apri in nuova finestra
                window.open(whatsappUrl, '_blank');
            }

            shareProduct(product) {
                const hasPromo = product.promotion && 
                                product.promotion.active && 
                                this.isPromotionValid(product.promotion);
                const finalPrice = this.getDiscountedPrice(product);
                
                let message = `Guarda questo prodotto di MECO - Incisioni e Stampe 3D:\n`;
                message += `🌟 *${product.name}*\n`;
                message += `${product.description}\n`;
                
                if (hasPromo) {
                    message += `💰 *PREZZO PROMOZIONALE*: €${finalPrice.toFixed(2)} (invece di €${product.basePrice.toFixed(2)})\n`;
                    message += `🎁 *SCONTO*: ${product.promotion.discount}% OFF\n`;
                } else {
                    message += `💰 Prezzo: €${product.basePrice.toFixed(2)}\n`;
                }
                
                message += `🔗 Vedi sul sito: ${window.location.href.split('#')[0]}#product-${product.id}`;
                
                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = `https://wa.me/?text=${encodedMessage}`;
                
                window.open(whatsappUrl, '_blank');
            }
        
            setupModal() {
                const modal = document.getElementById('product-modal');
                const closeBtn = modal.querySelector('.modal-close');
                
                if (closeBtn) {
                    closeBtn.addEventListener('click', () => this.closeModal());
                }
                
                // Chiudi cliccando fuori
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        this.closeModal();
                    }
                });
                
                // Chiudi con ESC
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && modal.classList.contains('active')) {
                        this.closeModal();
                    }
                });
            }

            setupContactForm() {
                const form = document.getElementById('contact-form');
                if (form) {
                    form.addEventListener('submit', (e) => {
                        e.preventDefault();
                        alert('Grazie per il tuo messaggio! Ti risponderemo al più presto.');
                        form.reset();
                        this.switchSection('home');
                    });
                }
            }

            // ============ PROMOZIONI SYSTEM ============
            initPromotions() {
                console.log('Inizializzazione promozioni...');
                
                // Controlla se ci sono promozioni attive
                if (!this.hasActivePromotions()) {
                    console.log('Nessuna promozione attiva, banner nascosto');
                    this.hideCountdownElements();
                    return; // Esci subito, non inizializzare nulla
                }
                
                // Se ci sono promozioni, procedi normalmente
                this.startCountdown();
                
                // Gestisci chiusura banner
                const closeBtn = document.getElementById('promo-close');
                if (closeBtn) {
                    closeBtn.addEventListener('click', () => {
                        this.hidePromoBanner();
                    });
                }
                
                // Controlla se mostrare il banner
                this.checkPromoBanner();
            }

            checkPromoBanner() {
                const banner = document.getElementById('promo-banner');
                const reopenBtn = document.getElementById('reopen-promo-btn');
                
                if (!banner) return;
                
                const closeDate = localStorage.getItem('meco_promo_closed_date');
                
                if (closeDate) {
                    const now = new Date().getTime();
                    const hoursPassed = (now - parseInt(closeDate)) / (1000 * 60 * 60);
                    
                    // Se sono passate più di 24 ore, mostra di nuovo il banner
                    if (hoursPassed >= 24) {
                        localStorage.removeItem('meco_promo_closed_date');
                        banner.style.display = 'block';
                        if (reopenBtn) reopenBtn.style.display = 'none';
                    } else {
                        // Nascondi banner e mostra pulsante riapri
                        banner.style.display = 'none';
                        this.showReopenButton();
                    }
                } else {
                    // Banner mai chiuso, mostra normalmente
                    banner.style.display = 'block';
                    if (reopenBtn) reopenBtn.style.display = 'none';
                }
            }

            hidePromoBanner() {
                const banner = document.getElementById('promo-banner');
                if (banner) {
                    banner.style.opacity = '0';
                    banner.style.transform = 'translateY(-20px)';
                    setTimeout(() => {
                        banner.style.display = 'none';
                        
                        // Salva la data di chiusura solo se ci sono promozioni attive
                        if (this.hasActivePromotions()) {
                            const closeDate = new Date().getTime();
                            localStorage.setItem('meco_promo_closed_date', closeDate);
                            this.showReopenButton();
                        }
                    }, 300);
                }
            }

            getDiscountedPrice(product) {
                if (!product) return 0;
                
                // Se non c'è promozione attiva, ritorna prezzo base
                if (!product.promotion || !product.promotion.active) {
                    return product.basePrice;
                }
                
                // Verifica se la promozione è ancora valida
                if (!this.isPromotionValid(product.promotion)) {
                    return product.basePrice;
                }
                
                // Calcola dinamicamente dallo sconto percentuale
                if (product.promotion.discount && product.promotion.discount > 0) {
                    const discountAmount = product.basePrice * (product.promotion.discount / 100);
                    const discountedPrice = product.basePrice - discountAmount;
                    // Arrotonda a 2 decimali
                    return Math.round(discountedPrice * 100) / 100;
                }
                
                // Se esiste un promoPrice fisso, usalo
                if (product.promotion.promoPrice && product.promotion.promoPrice > 0) {
                    return product.promotion.promoPrice;
                }
                
                // Default: prezzo base
                return product.basePrice;
            }

            startCountdown() {
                // Prima controlla se ci sono promozioni attive
                if (!this.hasActivePromotions()) {
                    console.log('Nessuna promozione attiva, countdown disabilitato');
                    this.hideCountdownElements();
                    return;
                }
                
                // Data di scadenza: 31 Dicembre 2025
                const endDate = new Date('2025-12-31T23:59:59').getTime();
                
                console.log('Countdown attivo, target date:', new Date(endDate));
                
                const updateCountdown = () => {
                    const now = new Date().getTime();
                    const timeLeft = endDate - now;
                    
                    if (timeLeft < 0) {
                        // Countdown finito - nascondi tutto
                        this.hidePromoBanner();
                        return;
                    }
                    
                    // Calcola giorni, ore, minuti, secondi
                    const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                    
                    // Aggiorna display
                    const daysEl = document.getElementById('days');
                    const hoursEl = document.getElementById('hours');
                    const minutesEl = document.getElementById('minutes');
                    const secondsEl = document.getElementById('seconds');
                    
                    if (daysEl) daysEl.textContent = days.toString().padStart(2, '0');
                    if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
                    if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
                    if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');
                };
                
                // Aggiorna immediatamente
                updateCountdown();
                
                // Aggiorna ogni secondo
                this.countdownInterval = setInterval(updateCountdown, 1000);
            }

            hideCountdownElements() {
                const promoBanner = document.getElementById('promo-banner');
                const reopenBtn = document.getElementById('reopen-promo-btn');
                
                if (promoBanner) {
                    promoBanner.style.display = 'none';
                }
                
                if (reopenBtn) {
                    reopenBtn.style.display = 'none';
                }
                
                // Ferma il countdown se è attivo
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                    this.countdownInterval = null;
                }
            }

            getPromotionalProducts() {
                const allProducts = [...productsData.incisioni, ...productsData.stampe3d];
                return allProducts.filter(product => 
                    product.promotion && 
                    product.promotion.active && 
                    this.isPromotionValid(product.promotion)
                );
            }

            isPromotionValid(promotion) {
                if (!promotion) return false;
                
                // Se c'è schedule, controlla le date
                if (promotion.schedule) {
                    try {
                        const now = new Date();
                        const startDate = new Date(promotion.schedule.startDate);
                        const endDate = new Date(promotion.schedule.endDate);
                        
                        // Prima controlla che le date siano valide
                        if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {
                            return false;
                        }
                        
                        // Poi controlla se siamo nel periodo
                        return (now >= startDate) && (now <= endDate);
                        
                    } catch (error) {
                        console.error('Errore nel controllo promozione:', error);
                        return false;
                    }
                }
                
                // Se non c'è schedule, usa active
                return promotion.active === true;
            }

            formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('it-IT', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
            }

            showReopenButton() {
                const reopenBtn = document.getElementById('reopen-promo-btn');
                if (reopenBtn) {
                    reopenBtn.style.display = 'flex';
                    
                    // Aggiungi evento click
                    reopenBtn.addEventListener('click', () => {
                        this.reopenPromoBanner();
                    });
                }
            }

            reopenPromoBanner() {
                // Prima controlla se ci sono ancora promozioni
                if (!this.hasActivePromotions()) {
                    console.log('Non ci sono promozioni attive da mostrare');
                    return;
                }
                
                const banner = document.getElementById('promo-banner');
                const reopenBtn = document.getElementById('reopen-promo-btn');
                
                if (banner) {
                    // Rimuovi la data di chiusura
                    localStorage.removeItem('meco_promo_closed_date');
                    
                    // Mostra il banner con animazione
                    banner.style.display = 'block';
                    banner.style.opacity = '0';
                    banner.style.transform = 'translateY(-20px)';
                    
                    setTimeout(() => {
                        banner.style.transition = 'all 0.5s ease';
                        banner.style.opacity = '1';
                        banner.style.transform = 'translateY(0)';
                    }, 10);
                    
                    // Nascondi il pulsante riapri
                    if (reopenBtn) {
                        reopenBtn.style.display = 'none';
                    }
                }
            }
        }

        // Aggiungi questa classe PRIMA del "document.addEventListener('DOMContentLoaded', ...)"
        class ParticleSystem {
            constructor() {
                this.canvas = document.getElementById('particle-canvas');
                if (!this.canvas) {
                    console.log('Canvas per particelle non trovato');
                    return;
                }
                
                this.ctx = this.canvas.getContext('2d');
                this.particles = [];
                this.particleCount = 50;
                
                this.initCanvas();
                this.createParticles();
                this.animate();
                
                window.addEventListener('resize', () => this.initCanvas());
            }
            
            initCanvas() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            createParticles() {
                for (let i = 0; i < this.particleCount; i++) {
                    this.particles.push({
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height,
                        size: Math.random() * 2 + 1,
                        speedX: Math.random() * 0.5 - 0.25,
                        speedY: Math.random() * 0.5 - 0.25,
                        opacity: Math.random() * 0.5 + 0.1
                    });
                }
            }
            
            animate() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                this.particles.forEach(particle => {
                    particle.x += particle.speedX;
                    particle.y += particle.speedY;
                    
                    if (particle.x > this.canvas.width) particle.x = 0;
                    if (particle.x < 0) particle.x = this.canvas.width;
                    if (particle.y > this.canvas.height) particle.y = 0;
                    if (particle.y < 0) particle.y = this.canvas.height;
                    
                    this.ctx.beginPath();
                    this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    this.ctx.fillStyle = `rgba(0, 198, 255, ${particle.opacity})`;
                    this.ctx.fill();
                });
                
                requestAnimationFrame(() => this.animate());
            }
        }

        // INIZIALIZZA APP - VERSIONE CORRETTA
        let app; // Dichiarazione globale

        document.addEventListener('DOMContentLoaded', () => {
            app = new MECOWebsite(); // Assegna all'oggetto globale
            window.app = app; // Rendi disponibile globalmente
            console.log('App pronta!');
            
            // Test: verifica che app sia disponibile
            console.log('App disponibile globalmente?', typeof window.app !== 'undefined');
        });

        // Poi mantieni l'inizializzazione
        document.addEventListener('DOMContentLoaded', () => {
            app = new MECOWebsite();
            window.app = app;
            console.log('App pronta!');
            
            // Inizializza particelle
            setTimeout(() => {
                new ParticleSystem();
            }, 1000);
        });

        // Test di debug - verifica se tutto è stato caricato
        setTimeout(() => {
            console.log('=== DEBUG INFO ===');
            console.log('Menu mobile:', document.querySelector('.mobile-menu-btn') ? 'TROVATO' : 'NON TROVATO');
            console.log('Menu nav:', document.querySelector('.nav-menu') ? 'TROVATO' : 'NON TROVATO');
            console.log('Sezione recensioni:', document.getElementById('recensioni') ? 'TROVATO' : 'NON TROVATO');
            console.log('Carousel recensioni:', document.getElementById('reviews-carousel') ? 'TROVATO' : 'NON TROVATO');
            console.log('Modal recensioni:', document.getElementById('review-modal') ? 'TROVATO' : 'NON TROVATO');
            console.log('App inizializzata:', window.app ? 'SI' : 'NO');
            console.log('=== FINE DEBUG ===');
        }, 2000);

        // Initialize particle system when page loads
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                new ParticleSystem();
            }, 1000);
        });
    </script>

    <!-- Particle Background -->
    <canvas id="particle-canvas" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        opacity: 0.3;
    "></canvas>
</body>
</html>
